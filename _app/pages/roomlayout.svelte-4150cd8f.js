var Be=Object.defineProperty;var Se=Object.getOwnPropertySymbols;var Ne=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable;var Ee=(o,e,t)=>e in o?Be(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,Le=(o,e)=>{for(var t in e||(e={}))Ne.call(e,t)&&Ee(o,t,e[t]);if(Se)for(var t of Se(e))Re.call(e,t)&&Ee(o,t,e[t]);return o};import{S as ue,i as ce,s as de,F as Ue,e as q,c as I,a as O,d as p,f as V,b as D,g as z,I as N,Q as He,J as ze,K as Ge,L as Ke,r as ae,p as fe,M as Ce,R as Xe,T as W,U as x,x as qe,y as Ie,z as Oe,V as $,C as Ve,t as P,h as Q,H as v,W as Ye,j as je,X as Je,l as Te,k as K,N as Pe,m as X,O as Qe,q as We,w as Ze,Y as xe,o as $e,Z as et}from"../chunks/index-b1f754cc.js";import{g as tt,s as ot,d as lt}from"../chunks/db-c0070083.js";function it(o){let e,t,i,m;const r=o[12].default,a=Ue(r,o,o[11],null);return{c(){e=q("section"),a&&a.c(),this.h()},l(l){e=I(l,"SECTION",{style:!0,class:!0});var s=O(e);a&&a.l(s),s.forEach(p),this.h()},h(){V(e,"left",o[0]+"px"),V(e,"top",o[1]+"px"),D(e,"class","draggable svelte-a5qxa8"),V(e,"background-color",o[2],!1)},m(l,s){z(l,e,s),a&&a.m(e,null),t=!0,i||(m=[N(window,"mouseup",o[5]),N(window,"mousemove",o[4]),N(window,"keydown",o[6]),N(window,"keyup",o[6]),N(e,"mousedown",He(o[3]))],i=!0)},p(l,[s]){a&&a.p&&(!t||s&2048)&&ze(a,r,l,l[11],t?Ke(r,l[11],s,null):Ge(l[11]),null),(!t||s&1)&&V(e,"left",l[0]+"px"),(!t||s&2)&&V(e,"top",l[1]+"px"),s&4&&V(e,"background-color",l[2],!1)},i(l){t||(ae(a,l),t=!0)},o(l){fe(a,l),t=!1},d(l){l&&p(e),a&&a.d(l),i=!1,Ce(m)}}}function nt(o,e,t){let{$$slots:i={},$$scope:m}=e,{left:r=100}=e,{top:a=100}=e,{minTop:l=0}=e,{minLeft:s=0}=e,{maxLeft:d=-1}=e,{maxTop:h=-1}=e,{bgColor:w="#FFFFFF"}=e;const U=Xe();let B=!1,L=!1;function A(){B=!0,U("click",{multiple:L})}function g(u){if(B){let F=r+u.movementX;F=Math.max(F,s),d>-1&&(F=Math.min(F,d)),t(0,r=F);let H=a+u.movementY;H=Math.max(H,l),h>-1&&(H=Math.min(H,h)),t(1,a=H)}}function _(){B=!1}function M(u){u.type==="keydown"&&u.shiftKey?L=!0:u.type==="keyup"&&u.key==="Shift"&&(L=!1)}return o.$$set=u=>{"left"in u&&t(0,r=u.left),"top"in u&&t(1,a=u.top),"minTop"in u&&t(7,l=u.minTop),"minLeft"in u&&t(8,s=u.minLeft),"maxLeft"in u&&t(9,d=u.maxLeft),"maxTop"in u&&t(10,h=u.maxTop),"bgColor"in u&&t(2,w=u.bgColor),"$$scope"in u&&t(11,m=u.$$scope)},[r,a,w,A,g,_,M,l,s,d,h,m,i]}class st extends ue{constructor(e){super(),ce(this,e,nt,it,de,{left:0,top:1,minTop:7,minLeft:8,maxLeft:9,maxTop:10,bgColor:2})}}function at(o){let e,t,i,m;return{c(){e=q("div"),t=P(o[2]),this.h()},l(r){e=I(r,"DIV",{class:!0,style:!0});var a=O(e);t=Q(a,o[2]),a.forEach(p),this.h()},h(){D(e,"class","p-4 seat-box svelte-dgddm1"),D(e,"style",o[3])},m(r,a){z(r,e,a),v(e,t),i||(m=N(e,"dblclick",Ye(o[5])),i=!0)},p(r,a){a&4&&je(t,r[2]),a&8&&D(e,"style",r[3])},d(r){r&&p(e),i=!1,m()}}}function ft(o){let e,t,i,m;function r(s){o[9](s)}function a(s){o[10](s)}let l={minTop:250,minLeft:75,maxTop:925,bgColor:o[4],$$slots:{default:[at]},$$scope:{ctx:o}};return o[0]!==void 0&&(l.top=o[0]),o[1]!==void 0&&(l.left=o[1]),e=new st({props:l}),W.push(()=>x(e,"top",r)),W.push(()=>x(e,"left",a)),e.$on("click",o[11]),{c(){qe(e.$$.fragment)},l(s){Ie(e.$$.fragment,s)},m(s,d){Oe(e,s,d),m=!0},p(s,[d]){const h={};d&16&&(h.bgColor=s[4]),d&8204&&(h.$$scope={dirty:d,ctx:s}),!t&&d&1&&(t=!0,h.top=s[0],$(()=>t=!1)),!i&&d&2&&(i=!0,h.left=s[1],$(()=>i=!1)),e.$set(h)},i(s){m||(ae(e.$$.fragment,s),m=!0)},o(s){fe(e.$$.fragment,s),m=!1},d(s){Ve(e,s)}}}function rt(o,e,t){let i,m,{id:r=""}=e,{top:a=250}=e,{left:l=75}=e,{active:s=!1}=e,{group:d=[]}=e,{facing:h=0}=e;const w={0:"top",1:"right",2:"bottom",3:"left"},U=()=>{let g=h;g++,g>3&&(g=0),t(6,h=g)};function B(g){a=g,t(0,a)}function L(g){l=g,t(1,l)}function A(g){Je.call(this,o,g)}return o.$$set=g=>{"id"in g&&t(2,r=g.id),"top"in g&&t(0,a=g.top),"left"in g&&t(1,l=g.left),"active"in g&&t(7,s=g.active),"group"in g&&t(8,d=g.group),"facing"in g&&t(6,h=g.facing)},o.$$.update=()=>{o.$$.dirty&388&&t(4,i=s?"#AAAAAA":d.indexOf(r)!=-1?"#AAEEAA":"#FFFFFF"),o.$$.dirty&64&&t(3,m="border-"+w[h]+": 3px solid blue;")},[a,l,r,m,i,U,h,s,d,B,L,A]}class ut extends ue{constructor(e){super(),ce(this,e,rt,ft,de,{id:2,top:0,left:1,active:7,group:8,facing:6})}}const{window:De}=xe;function Ae(o,e,t){const i=o.slice();return i[24]=e[t],i[25]=e,i[26]=t,i}function Me(o,e){let t,i,m,r,a,l,s,d;function h(_){e[16](_,e[24])}function w(_){e[17](_,e[24])}function U(_){e[18](_,e[24])}function B(_){e[19](_)}function L(_){e[20](_,e[24])}function A(..._){return e[21](e[24],..._)}let g={id:e[24].id};return e[24].top!==void 0&&(g.top=e[24].top),e[24].left!==void 0&&(g.left=e[24].left),e[24].active!==void 0&&(g.active=e[24].active),e[4]!==void 0&&(g.group=e[4]),e[24].direction!==void 0&&(g.facing=e[24].direction),i=new ut({props:g}),W.push(()=>x(i,"top",h)),W.push(()=>x(i,"left",w)),W.push(()=>x(i,"active",U)),W.push(()=>x(i,"group",B)),W.push(()=>x(i,"facing",L)),i.$on("click",A),{key:o,first:null,c(){t=Te(),qe(i.$$.fragment),this.h()},l(_){t=Te(),Ie(i.$$.fragment,_),this.h()},h(){this.first=t},m(_,M){z(_,t,M),Oe(i,_,M),d=!0},p(_,M){e=_;const u={};M&1&&(u.id=e[24].id),!m&&M&1&&(m=!0,u.top=e[24].top,$(()=>m=!1)),!r&&M&1&&(r=!0,u.left=e[24].left,$(()=>r=!1)),!a&&M&1&&(a=!0,u.active=e[24].active,$(()=>a=!1)),!l&&M&16&&(l=!0,u.group=e[4],$(()=>l=!1)),!s&&M&1&&(s=!0,u.facing=e[24].direction,$(()=>s=!1)),i.$set(u)},i(_){d||(ae(i.$$.fragment,_),d=!0)},o(_){fe(i.$$.fragment,_),d=!1},d(_){_&&p(t),Ve(i,_)}}}function Fe(o){let e;return{c(){e=q("div"),this.h()},l(t){e=I(t,"DIV",{class:!0,style:!0}),O(e).forEach(p),this.h()},h(){D(e,"class","box-select svelte-1lyqom9"),V(e,"left",o[2].x1+"px"),V(e,"top",o[2].y1+"px"),V(e,"width",o[2].width+"px"),V(e,"height",o[2].height+"px")},m(t,i){z(t,e,i)},p(t,i){i&4&&V(e,"left",t[2].x1+"px"),i&4&&V(e,"top",t[2].y1+"px"),i&4&&V(e,"width",t[2].width+"px"),i&4&&V(e,"height",t[2].height+"px")},d(t){t&&p(e)}}}function ct(o){let e,t,i,m,r,a,l,s,d,h,w,U,B,L,A,g,_,M,u,F,H,ee,te,k,Y,le,f,n,S,y,T=[],ie=new Map,E,R,oe,ne,Z=o[0];const se=c=>c[24].id;for(let c=0;c<Z.length;c+=1){let b=Ae(o,Z,c),G=se(b);ie.set(G,T[c]=Me(G,b))}let C=o[1]&&Fe(o);return{c(){e=K(),t=q("h2"),i=P("Room Layout"),m=K(),r=q("div"),a=q("div"),l=q("button"),s=P("Add Seat"),d=K(),h=q("div"),w=q("button"),U=P("Save Layout"),B=K(),L=q("div"),A=q("button"),g=P("Group Seats"),M=K(),u=q("div"),F=q("button"),H=P("Delete Seat(s)"),te=K(),k=q("div"),Y=q("h4"),le=P("Front"),f=K(),n=q("h4"),S=P("Left"),y=K();for(let c=0;c<T.length;c+=1)T[c].c();E=K(),C&&C.c(),this.h()},l(c){Pe('[data-svelte="svelte-13z677e"]',document.head).forEach(p),e=X(c),t=I(c,"H2",{class:!0});var G=O(t);i=Q(G,"Room Layout"),G.forEach(p),m=X(c),r=I(c,"DIV",{class:!0});var j=O(r);a=I(j,"DIV",{class:!0});var ge=O(a);l=I(ge,"BUTTON",{class:!0});var _e=O(l);s=Q(_e,"Add Seat"),_e.forEach(p),ge.forEach(p),d=X(j),h=I(j,"DIV",{class:!0});var he=O(h);w=I(he,"BUTTON",{class:!0});var me=O(w);U=Q(me,"Save Layout"),me.forEach(p),he.forEach(p),B=X(j),L=I(j,"DIV",{class:!0});var be=O(L);A=I(be,"BUTTON",{class:!0});var pe=O(A);g=Q(pe,"Group Seats"),pe.forEach(p),be.forEach(p),M=X(j),u=I(j,"DIV",{class:!0});var ve=O(u);F=I(ve,"BUTTON",{class:!0});var ye=O(F);H=Q(ye,"Delete Seat(s)"),ye.forEach(p),ve.forEach(p),j.forEach(p),te=X(c),k=I(c,"DIV",{class:!0,style:!0});var J=O(k);Y=I(J,"H4",{class:!0});var we=O(Y);le=Q(we,"Front"),we.forEach(p),f=X(J),n=I(J,"H4",{class:!0});var ke=O(n);S=Q(ke,"Left"),ke.forEach(p),y=X(J);for(let re=0;re<T.length;re+=1)T[re].l(J);E=X(J),C&&C.l(J),J.forEach(p),this.h()},h(){document.title="Room Layout",D(t,"class","title is-2"),D(l,"class","button is-primary"),D(a,"class","control"),D(w,"class","button is-primary"),D(h,"class","control"),D(A,"class","button"),A.disabled=_=!o[6],D(L,"class","control"),D(F,"class","button is-danger"),F.disabled=ee=!o[5],D(u,"class","control"),D(r,"class","field is-grouped"),D(Y,"class","title is-4 has-text-centered front-heading svelte-1lyqom9"),D(n,"class","title is-4 has-text-centered left-heading svelte-1lyqom9"),D(k,"class","box"),V(k,"height","800px")},m(c,b){z(c,e,b),z(c,t,b),v(t,i),z(c,m,b),z(c,r,b),v(r,a),v(a,l),v(l,s),v(r,d),v(r,h),v(h,w),v(w,U),v(r,B),v(r,L),v(L,A),v(A,g),v(r,M),v(r,u),v(u,F),v(F,H),z(c,te,b),z(c,k,b),v(k,Y),v(Y,le),v(k,f),v(k,n),v(n,S),v(k,y);for(let G=0;G<T.length;G+=1)T[G].m(k,null);v(k,E),C&&C.m(k,null),o[22](k),R=!0,oe||(ne=[N(De,"mouseup",o[14]),N(De,"mousemove",o[13]),N(l,"click",o[7]),N(w,"click",o[8]),N(A,"click",o[10]),N(F,"click",o[11]),N(k,"mousedown",o[12])],oe=!0)},p(c,[b]){(!R||b&64&&_!==(_=!c[6]))&&(A.disabled=_),(!R||b&32&&ee!==(ee=!c[5]))&&(F.disabled=ee),b&529&&(Z=c[0],$e(),T=Qe(T,b,se,1,c,Z,ie,k,et,Me,E,Ae),We()),c[1]?C?C.p(c,b):(C=Fe(c),C.c(),C.m(k,null)):C&&(C.d(1),C=null)},i(c){if(!R){for(let b=0;b<Z.length;b+=1)ae(T[b]);R=!0}},o(c){for(let b=0;b<T.length;b+=1)fe(T[b]);R=!1},d(c){c&&p(e),c&&p(t),c&&p(m),c&&p(r),c&&p(te),c&&p(k);for(let b=0;b<T.length;b+=1)T[b].d();C&&C.d(),o[22](null),oe=!1,Ce(ne)}}}function dt(o,e,t){let i,m,r,a,l=[],s=!1,d={},h={x:2,y:2},w=null;const U=()=>{const n={id:l.length>0?Math.max(...l.map(S=>S.id))+1:1,top:250,left:75,direction:0,group:[]};t(0,l=[...l,n])},B=async()=>{const f=l.map(n=>(delete n.active,n));await ot(f)},L=(f,n)=>{const S=l.map(y=>(y.active=y.id===f||n&&y.active,y));t(0,l=S)},A=()=>{i.forEach(f=>{let n=i.map(y=>y.id);n=n.concat(f.group);const S=new Set(n);f.group=[...S]})},g=async()=>{const f=[...i.map(n=>n.id)];await lt(f),t(0,l=l.filter(n=>f.indexOf(n.id)===-1))},_=f=>{var n=f.x+window.scrollX,S=f.y+window.scrollY;t(1,s=!0),t(2,d={x1:n,y1:S,x2:n,y2:S,width:0,height:0})},M=f=>{if(s){const T=w.offsetTop,ie=w.offsetLeft;var n=Math.max(f.x+window.scrollX,ie),S=Math.max(f.y+window.scrollY,T);let E=Le({},h);n<d.x1?E.x=1:n>=d.x2&&(E.x=2),S<d.y1?E.y=1:S>=d.y2&&(E.y=2),h=E;var y={x1:h.x===2?d.x1:n,x2:h.x===2?n:d.x2,y1:h.y===2?d.y1:S,y2:h.y===2?S:d.y2};y.width=y.x2-y.x1,y.height=y.y2-y.y1,t(2,d=y)}},u=()=>{h={x:2,y:2},t(1,s=!1);const{x1:f,x2:n,y1:S,y2:y}=d,T=(E,R)=>{const oe=E+100,ne=R+100,Z=f<=R&&R<=n||f<=ne&&ne<=n,se=S<=E&&E<=y||S<=oe&&oe<=y;return Z&&se};l.filter(E=>T(E.top,E.left)).forEach((E,R)=>{L(E.id,R!==0)})};Ze(async()=>{const f=await tt();t(0,l=f.map(n=>(n.isActive=!1,n.group=n.group||[],n.direction=n.direction||0,n)))});function F(f,n){o.$$.not_equal(n.top,f)&&(n.top=f,t(0,l))}function H(f,n){o.$$.not_equal(n.left,f)&&(n.left=f,t(0,l))}function ee(f,n){o.$$.not_equal(n.active,f)&&(n.active=f,t(0,l))}function te(f){a=f,t(4,a),t(15,i),t(0,l)}function k(f,n){o.$$.not_equal(n.direction,f)&&(n.direction=f,t(0,l))}const Y=(f,n)=>L(f.id,n.detail.multiple);function le(f){W[f?"unshift":"push"](()=>{w=f,t(3,w)})}return o.$$.update=()=>{o.$$.dirty&1&&t(15,i=l.filter(f=>f.active)),o.$$.dirty&32768&&t(6,m=i.length>1),o.$$.dirty&32768&&t(5,r=i.length>0),o.$$.dirty&32768&&t(4,a=i.length>0?i[0].group:[])},[l,s,d,w,a,r,m,U,B,L,A,g,_,M,u,i,F,H,ee,te,k,Y,le]}class mt extends ue{constructor(e){super(),ce(this,e,dt,ct,de,{})}}export{mt as default};
