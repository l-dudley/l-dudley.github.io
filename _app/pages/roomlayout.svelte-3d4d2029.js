var je=Object.defineProperty;var Oe=Object.getOwnPropertySymbols;var Je=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable;var Be=(o,e,t)=>e in o?je(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,Ne=(o,e)=>{for(var t in e||(e={}))Je.call(e,t)&&Be(o,t,e[t]);if(Oe)for(var t of Oe(e))Qe.call(e,t)&&Be(o,t,e[t]);return o};import{S as pe,i as ve,s as ye,F as Ze,e as L,c as T,a as A,d as h,f as q,b as E,g as K,I as U,Q as xe,J as $e,K as et,L as tt,r as he,p as _e,M as Ke,R as ot,T as Z,U as $,x as Pe,y as We,z as Xe,V as ee,C as Ye,t as X,h as Y,H as _,W as lt,j as it,X as st,l as Re,k as z,N as nt,m as G,O as at,q as ft,w as rt,Y as ut,o as ct,Z as dt}from"../chunks/index-b1f754cc.js";import{g as gt,s as ht,d as _t}from"../chunks/db-c0070083.js";function mt(o){let e,t,s,m;const c=o[11].default,n=Ze(c,o,o[10],null);return{c(){e=L("section"),n&&n.c(),this.h()},l(r){e=T(r,"SECTION",{style:!0,class:!0});var i=A(e);n&&n.l(i),i.forEach(h),this.h()},h(){q(e,"left",o[0]+"px"),q(e,"top",o[1]+"px"),E(e,"class","draggable svelte-a5qxa8"),q(e,"background-color",o[2],!1)},m(r,i){K(r,e,i),n&&n.m(e,null),t=!0,s||(m=[U(window,"mouseup",o[5]),U(window,"mousemove",o[4]),U(e,"mousedown",xe(o[3]))],s=!0)},p(r,[i]){n&&n.p&&(!t||i&1024)&&$e(n,c,r,r[10],t?tt(c,r[10],i,null):et(r[10]),null),(!t||i&1)&&q(e,"left",r[0]+"px"),(!t||i&2)&&q(e,"top",r[1]+"px"),i&4&&q(e,"background-color",r[2],!1)},i(r){t||(he(n,r),t=!0)},o(r){_e(n,r),t=!1},d(r){r&&h(e),n&&n.d(r),s=!1,Ke(m)}}}function bt(o,e,t){let{$$slots:s={},$$scope:m}=e,{left:c=100}=e,{top:n=100}=e,{minTop:r=0}=e,{minLeft:i=0}=e,{maxLeft:g=-1}=e,{maxTop:d=-1}=e,{bgColor:w="#FFFFFF"}=e;const v=ot();let O=!1;function B(l){O=!0,v("click",{multiple:l.shiftKey})}function M(l){if(O){let y=c+l.movementX;y=Math.max(y,i),g>-1&&(y=Math.min(y,g)),t(0,c=y);let I=n+l.movementY;I=Math.max(I,r),d>-1&&(I=Math.min(I,d)),t(1,n=I)}}function k(){O=!1}return o.$$set=l=>{"left"in l&&t(0,c=l.left),"top"in l&&t(1,n=l.top),"minTop"in l&&t(6,r=l.minTop),"minLeft"in l&&t(7,i=l.minLeft),"maxLeft"in l&&t(8,g=l.maxLeft),"maxTop"in l&&t(9,d=l.maxTop),"bgColor"in l&&t(2,w=l.bgColor),"$$scope"in l&&t(10,m=l.$$scope)},[c,n,w,B,M,k,r,i,g,d,m,s]}class pt extends pe{constructor(e){super(),ve(this,e,bt,mt,ye,{left:0,top:1,minTop:6,minLeft:7,maxLeft:8,maxTop:9,bgColor:2})}}function vt(o){let e,t,s,m;return{c(){e=L("div"),t=X(o[2]),this.h()},l(c){e=T(c,"DIV",{class:!0,style:!0});var n=A(e);t=Y(n,o[2]),n.forEach(h),this.h()},h(){E(e,"class","p-4 seat-box svelte-dgddm1"),E(e,"style",o[4])},m(c,n){K(c,e,n),_(e,t),s||(m=U(e,"dblclick",lt(o[6])),s=!0)},p(c,n){n&4&&it(t,c[2]),n&16&&E(e,"style",c[4])},d(c){c&&h(e),s=!1,m()}}}function yt(o){let e,t,s,m;function c(i){o[10](i)}function n(i){o[11](i)}let r={minTop:0,minLeft:0,maxTop:o[3].height-100,maxLeft:o[3].width-100,bgColor:o[5],$$slots:{default:[vt]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.top=o[0]),o[1]!==void 0&&(r.left=o[1]),e=new pt({props:r}),Z.push(()=>$(e,"top",c)),Z.push(()=>$(e,"left",n)),e.$on("click",o[12]),{c(){Pe(e.$$.fragment)},l(i){We(e.$$.fragment,i)},m(i,g){Xe(e,i,g),m=!0},p(i,[g]){const d={};g&8&&(d.maxTop=i[3].height-100),g&8&&(d.maxLeft=i[3].width-100),g&32&&(d.bgColor=i[5]),g&16404&&(d.$$scope={dirty:g,ctx:i}),!t&&g&1&&(t=!0,d.top=i[0],ee(()=>t=!1)),!s&&g&2&&(s=!0,d.left=i[1],ee(()=>s=!1)),e.$set(d)},i(i){m||(he(e.$$.fragment,i),m=!0)},o(i){_e(e.$$.fragment,i),m=!1},d(i){Ye(e,i)}}}function wt(o,e,t){let s,m,{id:c=""}=e,{top:n=250}=e,{left:r=75}=e,{active:i=!1}=e,{group:g=[]}=e,{facing:d=0}=e,{bounds:w={top:0,left:0,height:-1,width:-1}}=e;const v={0:"top",1:"right",2:"bottom",3:"left"},O=()=>{let l=d;l++,l>3&&(l=0),t(7,d=l)};function B(l){n=l,t(0,n)}function M(l){r=l,t(1,r)}function k(l){st.call(this,o,l)}return o.$$set=l=>{"id"in l&&t(2,c=l.id),"top"in l&&t(0,n=l.top),"left"in l&&t(1,r=l.left),"active"in l&&t(8,i=l.active),"group"in l&&t(9,g=l.group),"facing"in l&&t(7,d=l.facing),"bounds"in l&&t(3,w=l.bounds)},o.$$.update=()=>{o.$$.dirty&772&&t(5,s=i?"#AAAAAA":g.indexOf(c)!=-1?"#AAEEAA":"#FFFFFF"),o.$$.dirty&128&&t(4,m="border-"+v[d]+": 3px solid blue;")},[n,r,c,w,m,s,O,d,i,g,B,M,k]}class kt extends pe{constructor(e){super(),ve(this,e,wt,yt,ye,{id:2,top:0,left:1,active:8,group:9,facing:7,bounds:3})}}const{window:Ue}=ut;function He(o,e,t){const s=o.slice();return s[25]=e[t],s[26]=e,s[27]=t,s}function ze(o,e){let t,s,m,c,n,r,i,g;function d(l){e[17](l,e[25])}function w(l){e[18](l,e[25])}function v(l){e[19](l,e[25])}function O(l){e[20](l)}function B(l){e[21](l,e[25])}function M(...l){return e[22](e[25],...l)}let k={bounds:e[4],id:e[25].id};return e[25].top!==void 0&&(k.top=e[25].top),e[25].left!==void 0&&(k.left=e[25].left),e[25].active!==void 0&&(k.active=e[25].active),e[5]!==void 0&&(k.group=e[5]),e[25].direction!==void 0&&(k.facing=e[25].direction),s=new kt({props:k}),Z.push(()=>$(s,"top",d)),Z.push(()=>$(s,"left",w)),Z.push(()=>$(s,"active",v)),Z.push(()=>$(s,"group",O)),Z.push(()=>$(s,"facing",B)),s.$on("click",M),{key:o,first:null,c(){t=Re(),Pe(s.$$.fragment),this.h()},l(l){t=Re(),We(s.$$.fragment,l),this.h()},h(){this.first=t},m(l,y){K(l,t,y),Xe(s,l,y),g=!0},p(l,y){e=l;const I={};y&16&&(I.bounds=e[4]),y&1&&(I.id=e[25].id),!m&&y&1&&(m=!0,I.top=e[25].top,ee(()=>m=!1)),!c&&y&1&&(c=!0,I.left=e[25].left,ee(()=>c=!1)),!n&&y&1&&(n=!0,I.active=e[25].active,ee(()=>n=!1)),!r&&y&32&&(r=!0,I.group=e[5],ee(()=>r=!1)),!i&&y&1&&(i=!0,I.facing=e[25].direction,ee(()=>i=!1)),s.$set(I)},i(l){g||(he(s.$$.fragment,l),g=!0)},o(l){_e(s.$$.fragment,l),g=!1},d(l){l&&h(t),Ye(s,l)}}}function Ge(o){let e;return{c(){e=L("div"),this.h()},l(t){e=T(t,"DIV",{class:!0,style:!0}),A(e).forEach(h),this.h()},h(){E(e,"class","box-select svelte-grwghm"),q(e,"left",o[3].x1+"px"),q(e,"top",o[3].y1+"px"),q(e,"width",o[3].width+"px"),q(e,"height",o[3].height+"px")},m(t,s){K(t,e,s)},p(t,s){s&8&&q(e,"left",t[3].x1+"px"),s&8&&q(e,"top",t[3].y1+"px"),s&8&&q(e,"width",t[3].width+"px"),s&8&&q(e,"height",t[3].height+"px")},d(t){t&&h(e)}}}function St(o){let e,t,s,m,c,n,r,i,g,d,w,v,O,B,M,k,l,y,I,j,N,ie,te,se,x,J,ne,f,a,S,p,H,R,D,P,oe,V,C=[],fe=new Map,re,le,me,we,ae=o[0];const ke=u=>u[25].id;for(let u=0;u<ae.length;u+=1){let b=He(o,ae,u),W=ke(b);fe.set(W,C[u]=ze(W,b))}let F=o[2]&&Ge(o);return{c(){e=z(),t=L("h2"),s=X("Room Layout"),m=z(),c=L("div"),n=L("div"),r=L("div"),i=L("button"),g=X("Add Seat"),d=z(),w=L("div"),v=L("button"),O=X("Save Layout"),B=z(),M=L("div"),k=L("button"),l=X("Group Seats"),I=z(),j=L("div"),N=L("button"),ie=X("Delete Seat(s)"),se=z(),x=L("div"),J=L("span"),ne=X("Shift + Click to select multiple seats. Double click a seat to rotate it 90 degrees"),f=z(),a=L("div"),S=L("h4"),p=X("Front"),H=z(),R=L("div"),D=L("h4"),P=X("Left"),oe=z(),V=L("div");for(let u=0;u<C.length;u+=1)C[u].c();re=z(),F&&F.c(),this.h()},l(u){nt('[data-svelte="svelte-13z677e"]',document.head).forEach(h),e=G(u),t=T(u,"H2",{class:!0});var W=A(t);s=Y(W,"Room Layout"),W.forEach(h),m=G(u),c=T(u,"DIV",{class:!0});var ue=A(c);n=T(ue,"DIV",{class:!0});var Q=A(n);r=T(Q,"DIV",{class:!0});var Se=A(r);i=T(Se,"BUTTON",{class:!0});var Ee=A(i);g=Y(Ee,"Add Seat"),Ee.forEach(h),Se.forEach(h),d=G(Q),w=T(Q,"DIV",{class:!0});var De=A(w);v=T(De,"BUTTON",{class:!0});var Le=A(v);O=Y(Le,"Save Layout"),Le.forEach(h),De.forEach(h),B=G(Q),M=T(Q,"DIV",{class:!0});var Te=A(M);k=T(Te,"BUTTON",{class:!0});var Ae=A(k);l=Y(Ae,"Group Seats"),Ae.forEach(h),Te.forEach(h),I=G(Q),j=T(Q,"DIV",{class:!0});var Ie=A(j);N=T(Ie,"BUTTON",{class:!0});var Me=A(N);ie=Y(Me,"Delete Seat(s)"),Me.forEach(h),Ie.forEach(h),Q.forEach(h),se=G(ue),x=T(ue,"DIV",{});var Ce=A(x);J=T(Ce,"SPAN",{class:!0});var Fe=A(J);ne=Y(Fe,"Shift + Click to select multiple seats. Double click a seat to rotate it 90 degrees"),Fe.forEach(h),Ce.forEach(h),ue.forEach(h),f=G(u),a=T(u,"DIV",{class:!0});var ce=A(a);S=T(ce,"H4",{class:!0});var Ve=A(S);p=Y(Ve,"Front"),Ve.forEach(h),H=G(ce),R=T(ce,"DIV",{class:!0});var de=A(R);D=T(de,"H4",{class:!0});var qe=A(D);P=Y(qe,"Left"),qe.forEach(h),oe=G(de),V=T(de,"DIV",{class:!0});var ge=A(V);for(let be=0;be<C.length;be+=1)C[be].l(ge);re=G(ge),F&&F.l(ge),ge.forEach(h),de.forEach(h),ce.forEach(h),this.h()},h(){document.title="Room Layout",E(t,"class","title is-2"),E(i,"class","button is-primary"),E(r,"class","control"),E(v,"class","button is-primary"),E(w,"class","control"),E(k,"class","button"),k.disabled=y=!o[7],E(M,"class","control"),E(N,"class","button is-danger"),N.disabled=te=!o[6],E(j,"class","control"),E(n,"class","field is-grouped mr-4"),E(J,"class","is-size-7"),E(c,"class","is-flex"),E(S,"class","title is-4 has-text-centered mb-0 front-heading svelte-grwghm"),E(D,"class","title is-4 has-text-centered left-heading svelte-grwghm"),E(V,"class","room-container svelte-grwghm"),E(R,"class","is-flex"),E(a,"class","box")},m(u,b){K(u,e,b),K(u,t,b),_(t,s),K(u,m,b),K(u,c,b),_(c,n),_(n,r),_(r,i),_(i,g),_(n,d),_(n,w),_(w,v),_(v,O),_(n,B),_(n,M),_(M,k),_(k,l),_(n,I),_(n,j),_(j,N),_(N,ie),_(c,se),_(c,x),_(x,J),_(J,ne),K(u,f,b),K(u,a,b),_(a,S),_(S,p),_(a,H),_(a,R),_(R,D),_(D,P),_(R,oe),_(R,V);for(let W=0;W<C.length;W+=1)C[W].m(V,null);_(V,re),F&&F.m(V,null),o[23](V),le=!0,me||(we=[U(Ue,"mouseup",o[15]),U(Ue,"mousemove",o[14]),U(i,"click",o[8]),U(v,"click",o[9]),U(k,"click",o[11]),U(N,"click",o[12]),U(V,"mousedown",o[13])],me=!0)},p(u,[b]){(!le||b&128&&y!==(y=!u[7]))&&(k.disabled=y),(!le||b&64&&te!==(te=!u[6]))&&(N.disabled=te),b&1073&&(ae=u[0],ct(),C=at(C,b,ke,1,u,ae,fe,V,dt,ze,re,He),ft()),u[2]?F?F.p(u,b):(F=Ge(u),F.c(),F.m(V,null)):F&&(F.d(1),F=null)},i(u){if(!le){for(let b=0;b<ae.length;b+=1)he(C[b]);le=!0}},o(u){for(let b=0;b<C.length;b+=1)_e(C[b]);le=!1},d(u){u&&h(e),u&&h(t),u&&h(m),u&&h(c),u&&h(f),u&&h(a);for(let b=0;b<C.length;b+=1)C[b].d();F&&F.d(),o[23](null),me=!1,Ke(we)}}}function Et(o,e,t){let s,m,c,n,r,i=[],g=!1,d={},w={x:2,y:2},v=null;const O=()=>{const a={id:i.length>0?Math.max(...i.map(S=>S.id))+1:1,top:250,left:75,direction:0,group:[]};t(0,i=[...i,a])},B=async()=>{const f=i.map(a=>(delete a.active,a));await ht(f)},M=(f,a)=>{const S=i.map(p=>(p.active=p.id===f||a&&p.active,p));t(0,i=S)},k=()=>{s.forEach(f=>{let a=s.map(p=>p.id);a=a.concat(f.group);const S=new Set(a);f.group=[...S]})},l=async()=>{const f=[...s.map(a=>a.id)];await _t(f),t(0,i=i.filter(a=>f.indexOf(a.id)===-1))},y=f=>{if(f.button!==0)return;const{offsetTop:a,offsetLeft:S}=v;var p=f.x-S+window.scrollX,H=f.y-a+window.scrollY;t(2,g=!0),t(3,d={x1:p,y1:H,x2:p,y2:H,width:0,height:0})},I=f=>{if(g){const H=v.offsetTop,R=v.offsetLeft;var a=Math.max(f.x-R+window.scrollX),S=Math.max(f.y-H+window.scrollY);let D=Ne({},w);a<d.x1?D.x=1:a>=d.x2&&(D.x=2),S<d.y1?D.y=1:S>=d.y2&&(D.y=2),w=D;var p={x1:w.x===2?d.x1:a,x2:w.x===2?a:d.x2,y1:w.y===2?d.y1:S,y2:w.y===2?S:d.y2};p.width=p.x2-p.x1,p.height=p.y2-p.y1,t(3,d=p)}},j=()=>{w={x:2,y:2},t(2,g=!1);const{x1:f,x2:a,y1:S,y2:p}=d,H=(D,P)=>{const oe=D+100,V=P+100,C=f<=P&&P<=a||f<=V&&V<=a,fe=S<=D&&D<=p||S<=oe&&oe<=p;return C&&fe};i.filter(D=>H(D.top,D.left)).forEach((D,P)=>{M(D.id,P!==0)})};rt(async()=>{const f=await gt();t(0,i=f.map(a=>(a.isActive=!1,a.group=a.group||[],a.direction=a.direction||0,a)))});function N(f,a){o.$$.not_equal(a.top,f)&&(a.top=f,t(0,i))}function ie(f,a){o.$$.not_equal(a.left,f)&&(a.left=f,t(0,i))}function te(f,a){o.$$.not_equal(a.active,f)&&(a.active=f,t(0,i))}function se(f){n=f,t(5,n),t(16,s),t(0,i)}function x(f,a){o.$$.not_equal(a.direction,f)&&(a.direction=f,t(0,i))}const J=(f,a)=>M(f.id,a.detail.multiple);function ne(f){Z[f?"unshift":"push"](()=>{v=f,t(1,v)})}return o.$$.update=()=>{o.$$.dirty&1&&t(16,s=i.filter(f=>f.active)),o.$$.dirty&65536&&t(7,m=s.length>1),o.$$.dirty&65536&&t(6,c=s.length>0),o.$$.dirty&65536&&t(5,n=s.length>0?s[0].group:[]),o.$$.dirty&2&&t(4,r=v!==null?{top:0,left:0,width:v.clientWidth,height:v.clientHeight}:{})},[i,v,g,d,r,n,c,m,O,B,M,k,l,y,I,j,s,N,ie,te,se,x,J,ne]}class At extends pe{constructor(e){super(),ve(this,e,Et,St,ye,{})}}export{At as default};
