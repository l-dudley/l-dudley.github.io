var He=Object.defineProperty;var De=Object.getOwnPropertySymbols;var ze=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable;var Ae=(o,e,t)=>e in o?He(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,Me=(o,e)=>{for(var t in e||(e={}))ze.call(e,t)&&Ae(o,t,e[t]);if(De)for(var t of De(e))Ge.call(e,t)&&Ae(o,t,e[t]);return o};import{S as ge,i as _e,s as he,F as Ke,e as D,c as A,a as M,d as _,f as O,b as S,g as z,I as U,Q as We,J as Xe,K as Ye,L as je,r as ue,p as ce,M as Oe,R as Je,T as Q,U as x,x as Be,y as Re,z as Ne,V as $,C as Ue,t as J,h as P,H as b,W as Pe,j as Qe,X as Ze,l as Fe,k as W,N as xe,m as X,O as $e,q as et,w as tt,Y as ot,o as lt,Z as it}from"../chunks/index-b1f754cc.js";import{g as nt,s as st,d as at}from"../chunks/db-c0070083.js";function ft(o){let e,t,n,h;const u=o[11].default,f=Ke(u,o,o[10],null);return{c(){e=D("section"),f&&f.c(),this.h()},l(r){e=A(r,"SECTION",{style:!0,class:!0});var i=M(e);f&&f.l(i),i.forEach(_),this.h()},h(){O(e,"left",o[0]+"px"),O(e,"top",o[1]+"px"),S(e,"class","draggable svelte-a5qxa8"),O(e,"background-color",o[2],!1)},m(r,i){z(r,e,i),f&&f.m(e,null),t=!0,n||(h=[U(window,"mouseup",o[5]),U(window,"mousemove",o[4]),U(e,"mousedown",We(o[3]))],n=!0)},p(r,[i]){f&&f.p&&(!t||i&1024)&&Xe(f,u,r,r[10],t?je(u,r[10],i,null):Ye(r[10]),null),(!t||i&1)&&O(e,"left",r[0]+"px"),(!t||i&2)&&O(e,"top",r[1]+"px"),i&4&&O(e,"background-color",r[2],!1)},i(r){t||(ue(f,r),t=!0)},o(r){ce(f,r),t=!1},d(r){r&&_(e),f&&f.d(r),n=!1,Oe(h)}}}function rt(o,e,t){let{$$slots:n={},$$scope:h}=e,{left:u=100}=e,{top:f=100}=e,{minTop:r=0}=e,{minLeft:i=0}=e,{maxLeft:g=-1}=e,{maxTop:d=-1}=e,{bgColor:v="#FFFFFF"}=e;const k=Je();let B=!1;function q(l){B=!0,k("click",{multiple:l.shiftKey})}function L(l){if(B){let w=u+l.movementX;w=Math.max(w,i),g>-1&&(w=Math.min(w,g)),t(0,u=w);let y=f+l.movementY;y=Math.max(y,r),d>-1&&(y=Math.min(y,d)),t(1,f=y)}}function C(){B=!1}return o.$$set=l=>{"left"in l&&t(0,u=l.left),"top"in l&&t(1,f=l.top),"minTop"in l&&t(6,r=l.minTop),"minLeft"in l&&t(7,i=l.minLeft),"maxLeft"in l&&t(8,g=l.maxLeft),"maxTop"in l&&t(9,d=l.maxTop),"bgColor"in l&&t(2,v=l.bgColor),"$$scope"in l&&t(10,h=l.$$scope)},[u,f,v,q,L,C,r,i,g,d,h,n]}class ut extends ge{constructor(e){super(),_e(this,e,rt,ft,he,{left:0,top:1,minTop:6,minLeft:7,maxLeft:8,maxTop:9,bgColor:2})}}function ct(o){let e,t,n,h;return{c(){e=D("div"),t=J(o[2]),this.h()},l(u){e=A(u,"DIV",{class:!0,style:!0});var f=M(e);t=P(f,o[2]),f.forEach(_),this.h()},h(){S(e,"class","p-4 seat-box svelte-dgddm1"),S(e,"style",o[4])},m(u,f){z(u,e,f),b(e,t),n||(h=U(e,"dblclick",Pe(o[6])),n=!0)},p(u,f){f&4&&Qe(t,u[2]),f&16&&S(e,"style",u[4])},d(u){u&&_(e),n=!1,h()}}}function dt(o){let e,t,n,h;function u(i){o[10](i)}function f(i){o[11](i)}let r={minTop:0,minLeft:0,maxTop:o[3].height-100,maxLeft:o[3].width-100,bgColor:o[5],$$slots:{default:[ct]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.top=o[0]),o[1]!==void 0&&(r.left=o[1]),e=new ut({props:r}),Q.push(()=>x(e,"top",u)),Q.push(()=>x(e,"left",f)),e.$on("click",o[12]),{c(){Be(e.$$.fragment)},l(i){Re(e.$$.fragment,i)},m(i,g){Ne(e,i,g),h=!0},p(i,[g]){const d={};g&8&&(d.maxTop=i[3].height-100),g&8&&(d.maxLeft=i[3].width-100),g&32&&(d.bgColor=i[5]),g&16404&&(d.$$scope={dirty:g,ctx:i}),!t&&g&1&&(t=!0,d.top=i[0],$(()=>t=!1)),!n&&g&2&&(n=!0,d.left=i[1],$(()=>n=!1)),e.$set(d)},i(i){h||(ue(e.$$.fragment,i),h=!0)},o(i){ce(e.$$.fragment,i),h=!1},d(i){Ue(e,i)}}}function gt(o,e,t){let n,h,{id:u=""}=e,{top:f=250}=e,{left:r=75}=e,{active:i=!1}=e,{group:g=[]}=e,{facing:d=0}=e,{bounds:v={top:0,left:0,height:-1,width:-1}}=e;const k={0:"top",1:"right",2:"bottom",3:"left"},B=()=>{let l=d;l++,l>3&&(l=0),t(7,d=l)};function q(l){f=l,t(0,f)}function L(l){r=l,t(1,r)}function C(l){Ze.call(this,o,l)}return o.$$set=l=>{"id"in l&&t(2,u=l.id),"top"in l&&t(0,f=l.top),"left"in l&&t(1,r=l.left),"active"in l&&t(8,i=l.active),"group"in l&&t(9,g=l.group),"facing"in l&&t(7,d=l.facing),"bounds"in l&&t(3,v=l.bounds)},o.$$.update=()=>{o.$$.dirty&772&&t(5,n=i?"#AAAAAA":g.indexOf(u)!=-1?"#AAEEAA":"#FFFFFF"),o.$$.dirty&128&&t(4,h="border-"+k[d]+": 3px solid blue;")},[f,r,u,v,h,n,B,d,i,g,q,L,C]}class _t extends ge{constructor(e){super(),_e(this,e,gt,dt,he,{id:2,top:0,left:1,active:8,group:9,facing:7,bounds:3})}}const{window:Ie}=ot;function Ce(o,e,t){const n=o.slice();return n[25]=e[t],n[26]=e,n[27]=t,n}function Ve(o,e){let t,n,h,u,f,r,i,g;function d(l){e[17](l,e[25])}function v(l){e[18](l,e[25])}function k(l){e[19](l,e[25])}function B(l){e[20](l)}function q(l){e[21](l,e[25])}function L(...l){return e[22](e[25],...l)}let C={bounds:e[4],id:e[25].id};return e[25].top!==void 0&&(C.top=e[25].top),e[25].left!==void 0&&(C.left=e[25].left),e[25].active!==void 0&&(C.active=e[25].active),e[5]!==void 0&&(C.group=e[5]),e[25].direction!==void 0&&(C.facing=e[25].direction),n=new _t({props:C}),Q.push(()=>x(n,"top",d)),Q.push(()=>x(n,"left",v)),Q.push(()=>x(n,"active",k)),Q.push(()=>x(n,"group",B)),Q.push(()=>x(n,"facing",q)),n.$on("click",L),{key:o,first:null,c(){t=Fe(),Be(n.$$.fragment),this.h()},l(l){t=Fe(),Re(n.$$.fragment,l),this.h()},h(){this.first=t},m(l,w){z(l,t,w),Ne(n,l,w),g=!0},p(l,w){e=l;const y={};w&16&&(y.bounds=e[4]),w&1&&(y.id=e[25].id),!h&&w&1&&(h=!0,y.top=e[25].top,$(()=>h=!1)),!u&&w&1&&(u=!0,y.left=e[25].left,$(()=>u=!1)),!f&&w&1&&(f=!0,y.active=e[25].active,$(()=>f=!1)),!r&&w&32&&(r=!0,y.group=e[5],$(()=>r=!1)),!i&&w&1&&(i=!0,y.facing=e[25].direction,$(()=>i=!1)),n.$set(y)},i(l){g||(ue(n.$$.fragment,l),g=!0)},o(l){ce(n.$$.fragment,l),g=!1},d(l){l&&_(t),Ue(n,l)}}}function qe(o){let e;return{c(){e=D("div"),this.h()},l(t){e=A(t,"DIV",{class:!0,style:!0}),M(e).forEach(_),this.h()},h(){S(e,"class","box-select svelte-grwghm"),O(e,"left",o[3].x1+"px"),O(e,"top",o[3].y1+"px"),O(e,"width",o[3].width+"px"),O(e,"height",o[3].height+"px")},m(t,n){z(t,e,n)},p(t,n){n&8&&O(e,"left",t[3].x1+"px"),n&8&&O(e,"top",t[3].y1+"px"),n&8&&O(e,"width",t[3].width+"px"),n&8&&O(e,"height",t[3].height+"px")},d(t){t&&_(e)}}}function ht(o){let e,t,n,h,u,f,r,i,g,d,v,k,B,q,L,C,l,w,y,R,le,ee,te,N,Y,ie,ne,s,a,E,p,T,F=[],I=new Map,H,G,oe,se,Z=o[0];const me=c=>c[25].id;for(let c=0;c<Z.length;c+=1){let m=Ce(o,Z,c),K=me(m);I.set(K,F[c]=Ve(K,m))}let V=o[2]&&qe(o);return{c(){e=W(),t=D("h2"),n=J("Room Layout"),h=W(),u=D("div"),f=D("div"),r=D("button"),i=J("Add Seat"),g=W(),d=D("div"),v=D("button"),k=J("Save Layout"),B=W(),q=D("div"),L=D("button"),C=J("Group Seats"),w=W(),y=D("div"),R=D("button"),le=J("Delete Seat(s)"),te=W(),N=D("div"),Y=D("h4"),ie=J("Front"),ne=W(),s=D("div"),a=D("h4"),E=J("Left"),p=W(),T=D("div");for(let c=0;c<F.length;c+=1)F[c].c();H=W(),V&&V.c(),this.h()},l(c){xe('[data-svelte="svelte-13z677e"]',document.head).forEach(_),e=X(c),t=A(c,"H2",{class:!0});var K=M(t);n=P(K,"Room Layout"),K.forEach(_),h=X(c),u=A(c,"DIV",{class:!0});var j=M(u);f=A(j,"DIV",{class:!0});var be=M(f);r=A(be,"BUTTON",{class:!0});var pe=M(r);i=P(pe,"Add Seat"),pe.forEach(_),be.forEach(_),g=X(j),d=A(j,"DIV",{class:!0});var ve=M(d);v=A(ve,"BUTTON",{class:!0});var ye=M(v);k=P(ye,"Save Layout"),ye.forEach(_),ve.forEach(_),B=X(j),q=A(j,"DIV",{class:!0});var we=M(q);L=A(we,"BUTTON",{class:!0});var Se=M(L);C=P(Se,"Group Seats"),Se.forEach(_),we.forEach(_),w=X(j),y=A(j,"DIV",{class:!0});var ke=M(y);R=A(ke,"BUTTON",{class:!0});var Le=M(R);le=P(Le,"Delete Seat(s)"),Le.forEach(_),ke.forEach(_),j.forEach(_),te=X(c),N=A(c,"DIV",{class:!0});var ae=M(N);Y=A(ae,"H4",{class:!0});var Ee=M(Y);ie=P(Ee,"Front"),Ee.forEach(_),ne=X(ae),s=A(ae,"DIV",{class:!0});var fe=M(s);a=A(fe,"H4",{class:!0});var Te=M(a);E=P(Te,"Left"),Te.forEach(_),p=X(fe),T=A(fe,"DIV",{class:!0});var re=M(T);for(let de=0;de<F.length;de+=1)F[de].l(re);H=X(re),V&&V.l(re),re.forEach(_),fe.forEach(_),ae.forEach(_),this.h()},h(){document.title="Room Layout",S(t,"class","title is-2"),S(r,"class","button is-primary"),S(f,"class","control"),S(v,"class","button is-primary"),S(d,"class","control"),S(L,"class","button"),L.disabled=l=!o[7],S(q,"class","control"),S(R,"class","button is-danger"),R.disabled=ee=!o[6],S(y,"class","control"),S(u,"class","field is-grouped"),S(Y,"class","title is-4 has-text-centered mb-0 front-heading svelte-grwghm"),S(a,"class","title is-4 has-text-centered left-heading svelte-grwghm"),S(T,"class","room-container svelte-grwghm"),S(s,"class","is-flex"),S(N,"class","box")},m(c,m){z(c,e,m),z(c,t,m),b(t,n),z(c,h,m),z(c,u,m),b(u,f),b(f,r),b(r,i),b(u,g),b(u,d),b(d,v),b(v,k),b(u,B),b(u,q),b(q,L),b(L,C),b(u,w),b(u,y),b(y,R),b(R,le),z(c,te,m),z(c,N,m),b(N,Y),b(Y,ie),b(N,ne),b(N,s),b(s,a),b(a,E),b(s,p),b(s,T);for(let K=0;K<F.length;K+=1)F[K].m(T,null);b(T,H),V&&V.m(T,null),o[23](T),G=!0,oe||(se=[U(Ie,"mouseup",o[15]),U(Ie,"mousemove",o[14]),U(r,"click",o[8]),U(v,"click",o[9]),U(L,"click",o[11]),U(R,"click",o[12]),U(T,"mousedown",o[13])],oe=!0)},p(c,[m]){(!G||m&128&&l!==(l=!c[7]))&&(L.disabled=l),(!G||m&64&&ee!==(ee=!c[6]))&&(R.disabled=ee),m&1073&&(Z=c[0],lt(),F=$e(F,m,me,1,c,Z,I,T,it,Ve,H,Ce),et()),c[2]?V?V.p(c,m):(V=qe(c),V.c(),V.m(T,null)):V&&(V.d(1),V=null)},i(c){if(!G){for(let m=0;m<Z.length;m+=1)ue(F[m]);G=!0}},o(c){for(let m=0;m<F.length;m+=1)ce(F[m]);G=!1},d(c){c&&_(e),c&&_(t),c&&_(h),c&&_(u),c&&_(te),c&&_(N);for(let m=0;m<F.length;m+=1)F[m].d();V&&V.d(),o[23](null),oe=!1,Oe(se)}}}function mt(o,e,t){let n,h,u,f,r,i=[],g=!1,d={},v={x:2,y:2},k=null;const B=()=>{const a={id:i.length>0?Math.max(...i.map(E=>E.id))+1:1,top:250,left:75,direction:0,group:[]};t(0,i=[...i,a])},q=async()=>{const s=i.map(a=>(delete a.active,a));await st(s)},L=(s,a)=>{const E=i.map(p=>(p.active=p.id===s||a&&p.active,p));t(0,i=E)},C=()=>{n.forEach(s=>{let a=n.map(p=>p.id);a=a.concat(s.group);const E=new Set(a);s.group=[...E]})},l=async()=>{const s=[...n.map(a=>a.id)];await at(s),t(0,i=i.filter(a=>s.indexOf(a.id)===-1))},w=s=>{if(s.button!==0)return;const{offsetTop:a,offsetLeft:E}=k;var p=s.x-E+window.scrollX,T=s.y-a+window.scrollY;t(2,g=!0),t(3,d={x1:p,y1:T,x2:p,y2:T,width:0,height:0})},y=s=>{if(g){const T=k.offsetTop,F=k.offsetLeft;var a=Math.max(s.x-F+window.scrollX),E=Math.max(s.y-T+window.scrollY);let I=Me({},v);a<d.x1?I.x=1:a>=d.x2&&(I.x=2),E<d.y1?I.y=1:E>=d.y2&&(I.y=2),v=I;var p={x1:v.x===2?d.x1:a,x2:v.x===2?a:d.x2,y1:v.y===2?d.y1:E,y2:v.y===2?E:d.y2};p.width=p.x2-p.x1,p.height=p.y2-p.y1,t(3,d=p)}},R=()=>{v={x:2,y:2},t(2,g=!1);const{x1:s,x2:a,y1:E,y2:p}=d,T=(I,H)=>{const G=I+100,oe=H+100,se=s<=H&&H<=a||s<=oe&&oe<=a,Z=E<=I&&I<=p||E<=G&&G<=p;return se&&Z};i.filter(I=>T(I.top,I.left)).forEach((I,H)=>{L(I.id,H!==0)})};tt(async()=>{const s=await nt();t(0,i=s.map(a=>(a.isActive=!1,a.group=a.group||[],a.direction=a.direction||0,a)))});function le(s,a){o.$$.not_equal(a.top,s)&&(a.top=s,t(0,i))}function ee(s,a){o.$$.not_equal(a.left,s)&&(a.left=s,t(0,i))}function te(s,a){o.$$.not_equal(a.active,s)&&(a.active=s,t(0,i))}function N(s){f=s,t(5,f),t(16,n),t(0,i)}function Y(s,a){o.$$.not_equal(a.direction,s)&&(a.direction=s,t(0,i))}const ie=(s,a)=>L(s.id,a.detail.multiple);function ne(s){Q[s?"unshift":"push"](()=>{k=s,t(1,k)})}return o.$$.update=()=>{o.$$.dirty&1&&t(16,n=i.filter(s=>s.active)),o.$$.dirty&65536&&t(7,h=n.length>1),o.$$.dirty&65536&&t(6,u=n.length>0),o.$$.dirty&65536&&t(5,f=n.length>0?n[0].group:[]),o.$$.dirty&2&&t(4,r=k!==null?{top:0,left:0,width:k.clientWidth,height:k.clientHeight}:{})},[i,k,g,d,r,f,u,h,B,q,L,C,l,w,y,R,n,le,ee,te,N,Y,ie,ne]}class yt extends ge{constructor(e){super(),_e(this,e,mt,ht,he,{})}}export{yt as default};
