import{S as ne,i as ue,s as re,e as b,t as z,c as E,a as S,h as G,d as c,g as M,H as h,j as Fe,a0 as Be,b as p,G as Ee,a1 as Se,I as $,O as Ce,P as Me,n as ie,a2 as Ue,T as X,U as Y,x as ee,k as B,y as te,m as C,z as le,V as Z,r as P,p as J,C as se,R as qe,a3 as we,o as Ae,q as ze,a4 as Ge,M as Pe,w as je}from"./index-b1f754cc.js";import{a as He,c as Je,i as Ke,u as Qe}from"./db-c0070083.js";import{c as K}from"./singletons-d1fb5791.js";function ke(s,t,e){const l=s.slice();return l[4]=t[e],l}function Ie(s,t){let e,l=t[4].text+"",i,n;return{key:s,first:null,c(){e=b("option"),i=z(l),this.h()},l(r){e=E(r,"OPTION",{});var a=S(e);i=G(a,l),a.forEach(c),this.h()},h(){e.__value=n=t[4].value,e.value=e.__value,this.first=e},m(r,a){M(r,e,a),h(e,i)},p(r,a){t=r,a&4&&l!==(l=t[4].text+"")&&Fe(i,l),a&4&&n!==(n=t[4].value)&&(e.__value=n,e.value=e.__value)},d(r){r&&c(e)}}}function We(s){let t,e,l,i,n=[],r=new Map,a,g,v=s[2];const m=u=>u[4].value;for(let u=0;u<v.length;u+=1){let d=ke(s,v,u),f=m(d);r.set(f,n[u]=Ie(f,d))}return{c(){t=b("div"),e=b("div"),l=b("div"),i=b("select");for(let u=0;u<n.length;u+=1)n[u].c();this.h()},l(u){t=E(u,"DIV",{class:!0});var d=S(t);e=E(d,"DIV",{class:!0});var f=S(e);l=E(f,"DIV",{class:!0});var D=S(l);i=E(D,"SELECT",{});var T=S(i);for(let _=0;_<n.length;_+=1)n[_].l(T);T.forEach(c),D.forEach(c),f.forEach(c),d.forEach(c),this.h()},h(){s[0]===void 0&&Be(()=>s[3].call(i)),p(l,"class","select is-fullwidth"),Ee(l,"is-fullwidth",s[1]),p(e,"class","control"),p(t,"class","field")},m(u,d){M(u,t,d),h(t,e),h(e,l),h(l,i);for(let f=0;f<n.length;f+=1)n[f].m(i,null);Se(i,s[0]),a||(g=$(i,"change",s[3]),a=!0)},p(u,[d]){d&4&&(v=u[2],n=Ce(n,d,m,1,u,v,r,i,Me,Ie,null,ke)),d&5&&Se(i,u[0]),d&2&&Ee(l,"is-fullwidth",u[1])},i:ie,o:ie,d(u){u&&c(t);for(let d=0;d<n.length;d+=1)n[d].d();a=!1,g()}}}function Xe(s,t,e){let{fullwidth:l=!1}=t,{options:i=[]}=t,{value:n=""}=t;function r(){n=Ue(this),e(0,n),e(2,i)}return s.$$set=a=>{"fullwidth"in a&&e(1,l=a.fullwidth),"options"in a&&e(2,i=a.options),"value"in a&&e(0,n=a.value)},[n,l,i,r]}class De extends ne{constructor(t){super(),ue(this,t,Xe,We,re,{fullwidth:1,options:2,value:0})}}function Ye(s){let t,e,l,i,n,r,a,g,v,m,u,d,f,D,T;function _(w){s[5](w)}let V={options:s[2],fullwidth:!0};s[0].type!==void 0&&(V.value=s[0].type),l=new De({props:V}),X.push(()=>Y(l,"value",_));function F(w){s[6](w)}let R={options:s[1],fullwidth:!0};return s[0].criteria!==void 0&&(R.value=s[0].criteria),r=new De({props:R}),X.push(()=>Y(r,"value",F)),{c(){t=b("div"),e=b("div"),ee(l.$$.fragment),n=B(),ee(r.$$.fragment),g=B(),v=b("div"),m=b("div"),u=b("button"),d=z("Delete"),this.h()},l(w){t=E(w,"DIV",{class:!0});var O=S(t);e=E(O,"DIV",{class:!0});var L=S(e);te(l.$$.fragment,L),n=C(L),te(r.$$.fragment,L),g=C(L),v=E(L,"DIV",{class:!0});var y=S(v);m=E(y,"DIV",{class:!0});var Q=S(m);u=E(Q,"BUTTON",{class:!0});var j=S(u);d=G(j,"Delete"),j.forEach(c),Q.forEach(c),y.forEach(c),L.forEach(c),O.forEach(c),this.h()},h(){p(u,"class","button is-danger"),p(m,"class","control"),p(v,"class","field"),p(e,"class","field-body"),p(t,"class","field is-horizontal")},m(w,O){M(w,t,O),h(t,e),le(l,e,null),h(e,n),le(r,e,null),h(e,g),h(e,v),h(v,m),h(m,u),h(u,d),f=!0,D||(T=$(u,"click",s[7]),D=!0)},p(w,[O]){const L={};!i&&O&1&&(i=!0,L.value=w[0].type,Z(()=>i=!1)),l.$set(L);const y={};O&2&&(y.options=w[1]),!a&&O&1&&(a=!0,y.value=w[0].criteria,Z(()=>a=!1)),r.$set(y)},i(w){f||(P(l.$$.fragment,w),P(r.$$.fragment,w),f=!0)},o(w){J(l.$$.fragment,w),J(r.$$.fragment,w),f=!1},d(w){w&&c(t),se(l),se(r),D=!1,T()}}}function Ze(s,t,e){let l;const i=qe();let{value:n={type:"nogroup",criteria:""}}=t,{otherStudents:r=[]}=t;const a=[{value:"nogroup",text:"Can't sit with"},{value:"location",text:"Must sit in area"},{value:"facing",text:"Must sit facing"}],g={nogroup:r,location:[{value:"front",text:"Front"},{value:"back",text:"Back"},{value:"left",text:"Left"},{value:"right",text:"Right"}],facing:[{value:"front",text:"Front"},{value:"back",text:"Back"},{value:"left",text:"Left"},{value:"right",text:"Right"}]},v=f=>{i("delete",{id:f})};function m(f){s.$$.not_equal(n.type,f)&&(n.type=f,e(0,n))}function u(f){s.$$.not_equal(n.criteria,f)&&(n.criteria=f,e(0,n))}const d=()=>v(n.id);return s.$$set=f=>{"value"in f&&e(0,n=f.value),"otherStudents"in f&&e(4,r=f.otherStudents)},s.$$.update=()=>{s.$$.dirty&1&&e(1,l=g[n.type])},[n,l,a,v,r,m,u,d]}class xe extends ne{constructor(t){super(),ue(this,t,Ze,Ye,re,{value:0,otherStudents:4})}}function Ne(s){let t,e;return{c(){t=b("label"),e=z(s[1]),this.h()},l(l){t=E(l,"LABEL",{for:!0,class:!0});var i=S(t);e=G(i,s[1]),i.forEach(c),this.h()},h(){p(t,"for","txtFirstName"),p(t,"class","label")},m(l,i){M(l,t,i),h(t,e)},p(l,i){i&2&&Fe(e,l[1])},d(l){l&&c(t)}}}function $e(s){let t,e,l,i,n,r,a=s[1]&&Ne(s);return{c(){t=b("div"),a&&a.c(),e=B(),l=b("div"),i=b("input"),this.h()},l(g){t=E(g,"DIV",{class:!0});var v=S(t);a&&a.l(v),e=C(v),l=E(v,"DIV",{id:!0,class:!0});var m=S(l);i=E(m,"INPUT",{class:!0}),m.forEach(c),v.forEach(c),this.h()},h(){p(i,"class","input"),p(l,"id","txtFirstName"),p(l,"class","control"),p(t,"class","field")},m(g,v){M(g,t,v),a&&a.m(t,null),h(t,e),h(t,l),h(l,i),we(i,s[0]),n||(r=$(i,"input",s[2]),n=!0)},p(g,[v]){g[1]?a?a.p(g,v):(a=Ne(g),a.c(),a.m(t,e)):a&&(a.d(1),a=null),v&1&&i.value!==g[0]&&we(i,g[0])},i:ie,o:ie,d(g){g&&c(t),a&&a.d(),n=!1,r()}}}function et(s,t,e){let{value:l=""}=t,{label:i=""}=t;function n(){l=this.value,e(0,l)}return s.$$set=r=>{"value"in r&&e(0,l=r.value),"label"in r&&e(1,i=r.label)},[l,i,n]}class Ve extends ne{constructor(t){super(),ue(this,t,et,$e,re,{value:0,label:1})}}K.disable_scroll_handling;const tt=K.goto;K.invalidate;K.prefetch;K.prefetch_routes;K.before_navigate;K.after_navigate;function ye(s,t,e){const l=s.slice();return l[13]=t[e],l[14]=t,l[15]=e,l}function Te(s){let t,e,l,i,n,r,a;function g(u){s[11](u,s[13],s[14],s[15])}function v(u){s[12](u)}let m={};return s[13]!==void 0&&(m.value=s[13]),s[3]!==void 0&&(m.otherStudents=s[3]),l=new xe({props:m}),X.push(()=>Y(l,"value",g)),X.push(()=>Y(l,"otherStudents",v)),l.$on("delete",s[6]),{c(){t=b("div"),e=b("div"),ee(l.$$.fragment),r=B(),this.h()},l(u){t=E(u,"DIV",{class:!0});var d=S(t);e=E(d,"DIV",{class:!0});var f=S(e);te(l.$$.fragment,f),f.forEach(c),r=C(d),d.forEach(c),this.h()},h(){p(e,"class","field-body"),p(t,"class","field is-horizontal")},m(u,d){M(u,t,d),h(t,e),le(l,e,null),h(t,r),a=!0},p(u,d){s=u;const f={};!i&&d&4&&(i=!0,f.value=s[13],Z(()=>i=!1)),!n&&d&8&&(n=!0,f.otherStudents=s[3],Z(()=>n=!1)),l.$set(f)},i(u){a||(P(l.$$.fragment,u),a=!0)},o(u){J(l.$$.fragment,u),a=!1},d(u){u&&c(t),se(l)}}}function lt(s){let t,e,l,i,n,r,a,g,v,m,u,d,f,D,T,_,V,F,R,w,O,L,y,Q,j,A,oe,ae,fe,ce;function Le(o){s[9](o)}let _e={label:"First Name"};s[0]!==void 0&&(_e.value=s[0]),a=new Ve({props:_e}),X.push(()=>Y(a,"value",Le));function Re(o){s[10](o)}let he={label:"Last Name"};s[1]!==void 0&&(he.value=s[1]),m=new Ve({props:he}),X.push(()=>Y(m,"value",Re));let H=s[2],k=[];for(let o=0;o<H.length;o+=1)k[o]=Te(ye(s,H,o));const Oe=o=>J(k[o],1,1,()=>{k[o]=null});return{c(){t=b("div"),e=b("div"),l=b("fieldset"),i=b("legend"),n=z("Student Info"),r=B(),ee(a.$$.fragment),v=B(),ee(m.$$.fragment),d=B(),f=b("div"),D=b("fieldset"),T=b("legend"),_=z("Seating Rules"),V=B(),F=b("div"),R=b("button"),w=z("Add"),O=B();for(let o=0;o<k.length;o+=1)k[o].c();L=B(),y=b("button"),Q=z("Save"),j=B(),A=b("a"),oe=z("Cancel"),this.h()},l(o){t=E(o,"DIV",{class:!0});var I=S(t);e=E(I,"DIV",{class:!0});var U=S(e);l=E(U,"FIELDSET",{class:!0});var q=S(l);i=E(q,"LEGEND",{class:!0});var N=S(i);n=G(N,"Student Info"),N.forEach(c),r=C(q),te(a.$$.fragment,q),v=C(q),te(m.$$.fragment,q),q.forEach(c),U.forEach(c),d=C(I),f=E(I,"DIV",{class:!0});var x=S(f);D=E(x,"FIELDSET",{class:!0});var W=S(D);T=E(W,"LEGEND",{class:!0});var ve=S(T);_=G(ve,"Seating Rules"),ve.forEach(c),V=C(W),F=E(W,"DIV",{class:!0});var ge=S(F);R=E(ge,"BUTTON",{class:!0});var me=S(R);w=G(me,"Add"),me.forEach(c),ge.forEach(c),O=C(W);for(let de=0;de<k.length;de+=1)k[de].l(W);W.forEach(c),x.forEach(c),I.forEach(c),L=C(o),y=E(o,"BUTTON",{class:!0});var pe=S(y);Q=G(pe,"Save"),pe.forEach(c),j=C(o),A=E(o,"A",{class:!0,href:!0});var be=S(A);oe=G(be,"Cancel"),be.forEach(c),this.h()},h(){p(i,"class","subtitle is-4"),p(l,"class","box"),p(e,"class","column"),p(T,"class","subtitle is-4"),p(R,"class","button is-primary"),p(F,"class","field"),p(D,"class","box"),p(f,"class","column"),p(t,"class","columns"),p(y,"class","button is-primary"),p(A,"class","button"),p(A,"href","/roster")},m(o,I){M(o,t,I),h(t,e),h(e,l),h(l,i),h(i,n),h(l,r),le(a,l,null),h(l,v),le(m,l,null),h(t,d),h(t,f),h(f,D),h(D,T),h(T,_),h(D,V),h(D,F),h(F,R),h(R,w),h(D,O);for(let U=0;U<k.length;U+=1)k[U].m(D,null);M(o,L,I),M(o,y,I),h(y,Q),M(o,j,I),M(o,A,I),h(A,oe),ae=!0,fe||(ce=[$(R,"click",s[5]),$(y,"click",s[4])],fe=!0)},p(o,[I]){const U={};!g&&I&1&&(g=!0,U.value=o[0],Z(()=>g=!1)),a.$set(U);const q={};if(!u&&I&2&&(u=!0,q.value=o[1],Z(()=>u=!1)),m.$set(q),I&76){H=o[2];let N;for(N=0;N<H.length;N+=1){const x=ye(o,H,N);k[N]?(k[N].p(x,I),P(k[N],1)):(k[N]=Te(x),k[N].c(),P(k[N],1),k[N].m(D,null))}for(Ae(),N=H.length;N<k.length;N+=1)Oe(N);ze()}},i(o){if(!ae){P(a.$$.fragment,o),P(m.$$.fragment,o);for(let I=0;I<H.length;I+=1)P(k[I]);ae=!0}},o(o){J(a.$$.fragment,o),J(m.$$.fragment,o),k=k.filter(Boolean);for(let I=0;I<k.length;I+=1)J(k[I]);ae=!1},d(o){o&&c(t),se(a),se(m),Ge(k,o),o&&c(L),o&&c(y),o&&c(j),o&&c(A),fe=!1,Pe(ce)}}}function st(s,t,e){let l,{firstName:i=""}=t,{lastName:n=""}=t,{id:r=""}=t,{rules:a=[]}=t,g=[];const v=async()=>{!i||!n||(r?await Qe({id:r,firstName:i,lastName:n,rules:a}):(e(7,r=await Je()),await Ke({id:r,firstName:i,lastName:n,rules:a})),await tt("/roster"))},m=()=>{const _=a.length>0?Math.max(...a.map(F=>F.id))+1:1,V={type:"nogroup",criteria:"",id:_};e(2,a=[...a,V])},u=_=>{const V=_.detail.id;e(2,a=a.filter(F=>F.id!==V))};je(async()=>{const _=await He();e(8,g=_.map(V=>({value:V.id,text:`${V.firstName} ${V.lastName}`})))});function d(_){i=_,e(0,i)}function f(_){n=_,e(1,n)}function D(_,V,F,R){F[R]=_,e(2,a)}function T(_){l=_,e(3,l),e(8,g),e(7,r)}return s.$$set=_=>{"firstName"in _&&e(0,i=_.firstName),"lastName"in _&&e(1,n=_.lastName),"id"in _&&e(7,r=_.id),"rules"in _&&e(2,a=_.rules)},s.$$.update=()=>{s.$$.dirty&384&&e(3,l=g.filter(_=>_.value!=r))},[i,n,a,l,v,m,u,r,g,d,f,D,T]}class ut extends ne{constructor(t){super(),ue(this,t,st,lt,re,{firstName:0,lastName:1,id:7,rules:2})}}export{ut as S};
