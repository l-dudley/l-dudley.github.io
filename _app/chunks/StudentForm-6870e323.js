import{S as ye,i as Ie,s as De,N as K,O as P,e as w,x,k as O,t as j,c as y,a as I,y as ee,m as C,h as Q,d as p,b as E,g as z,H as m,z as te,I as re,Q as X,o as Ne,p as A,q as Te,r as q,C as le,Z as Fe,G as ue,f as fe,j as Be,R as Me,T as Oe,n as Ce,a5 as qe,M as Ue,w as ze}from"./index-73f85fd5.js";import{b as Ae,g as Ge,e as He,i as je,u as Qe}from"./db-61e6d286.js";import{S as Ve}from"./SelectField-d67783ee.js";import{M as We,S as Ze,T as be}from"./TextField-21a97b92.js";import{c as se}from"./singletons-d1fb5791.js";function Se(s,e,t){const a=s.slice();return a[19]=e[t],a}function Je(s){let e,t,a;function d(l){s[13](l)}let n={options:s[4],fullwidth:!0};return s[0].criteria!==void 0&&(n.value=s[0].criteria),e=new Ve({props:n}),K.push(()=>P(e,"value",d)),{c(){x(e.$$.fragment)},l(l){ee(e.$$.fragment,l)},m(l,i){te(e,l,i),a=!0},p(l,i){const u={};i&16&&(u.options=l[4]),!t&&i&1&&(t=!0,u.value=l[0].criteria,X(()=>t=!1)),e.$set(u)},i(l){a||(q(e.$$.fragment,l),a=!0)},o(l){A(e.$$.fragment,l),a=!1},d(l){le(e,l)}}}function Ke(s){let e,t,a;function d(l){s[12](l)}let n={options:s[4],fullwidth:!0,buttonText:"Select",onButtonClick:s[7]};return s[0].criteria!==void 0&&(n.value=s[0].criteria),e=new Ze({props:n}),K.push(()=>P(e,"value",d)),{c(){x(e.$$.fragment)},l(l){ee(e.$$.fragment,l)},m(l,i){te(e,l,i),a=!0},p(l,i){const u={};i&16&&(u.options=l[4]),!t&&i&1&&(t=!0,u.value=l[0].criteria,X(()=>t=!1)),e.$set(u)},i(l){a||(q(e.$$.fragment,l),a=!0)},o(l){A(e.$$.fragment,l),a=!1},d(l){le(e,l)}}}function ke(s,e){let t,a=e[19].id+"",d,n,l=`${e[19].left/2}px`,i=`${e[19].top/2}px`,u,b;function v(){return e[15](e[19])}return{key:s,first:null,c(){t=w("div"),d=j(a),n=O(),this.h()},l(c){t=y(c,"DIV",{class:!0});var g=I(t);d=Q(g,a),n=C(g),g.forEach(p),this.h()},h(){E(t,"class","seat-box svelte-1255w0a"),ue(t,"has-background-primary",e[19].id===e[3]),ue(t,"has-text-light",e[19].id===e[3]),fe(t,"left",l,!1),fe(t,"top",i,!1),this.first=t},m(c,g){z(c,t,g),m(t,d),m(t,n),u||(b=re(t,"click",v),u=!0)},p(c,g){e=c,g&2&&a!==(a=e[19].id+"")&&Be(d,a),g&10&&ue(t,"has-background-primary",e[19].id===e[3]),g&10&&ue(t,"has-text-light",e[19].id===e[3]),g&2&&l!==(l=`${e[19].left/2}px`)&&fe(t,"left",l,!1),g&2&&i!==(i=`${e[19].top/2}px`)&&fe(t,"top",i,!1)},d(c){c&&p(t),u=!1,b()}}}function Pe(s){let e,t,a,d,n,l,i,u,b,v=[],c=new Map,g=s[1];const k=r=>r[19].id;for(let r=0;r<g.length;r+=1){let S=Se(s,g,r),V=k(S);c.set(V,v[r]=ke(V,S))}return{c(){e=w("div"),t=w("h4"),a=j("Front"),d=O(),n=w("div"),l=w("h4"),i=j("Left"),u=O(),b=w("div");for(let r=0;r<v.length;r+=1)v[r].c();this.h()},l(r){e=y(r,"DIV",{class:!0});var S=I(e);t=y(S,"H4",{class:!0});var V=I(t);a=Q(V,"Front"),V.forEach(p),d=C(S),n=y(S,"DIV",{class:!0});var B=I(n);l=y(B,"H4",{class:!0});var f=I(l);i=Q(f,"Left"),f.forEach(p),u=C(B),b=y(B,"DIV",{class:!0});var D=I(b);for(let L=0;L<v.length;L+=1)v[L].l(D);D.forEach(p),B.forEach(p),S.forEach(p),this.h()},h(){E(t,"class","title is-4 has-text-centered mb-0 front-heading svelte-1255w0a"),E(l,"class","title is-4 has-text-centered left-heading svelte-1255w0a"),E(b,"class","room-container svelte-1255w0a"),E(n,"class","is-flex"),E(e,"class","box")},m(r,S){z(r,e,S),m(e,t),m(t,a),m(e,d),m(e,n),m(n,l),m(l,i),m(n,u),m(n,b);for(let V=0;V<v.length;V+=1)v[V].m(b,null)},p(r,S){S&266&&(g=r[1],v=Me(v,S,k,1,r,g,c,b,Oe,ke,null,Se))},d(r){r&&p(e);for(let S=0;S<v.length;S+=1)v[S].d()}}}function Xe(s){let e,t,a,d;return{c(){e=w("button"),t=j("Select"),this.h()},l(n){e=y(n,"BUTTON",{class:!0});var l=I(e);t=Q(l,"Select"),l.forEach(p),this.h()},h(){E(e,"class","button is-primary")},m(n,l){z(n,e,l),m(e,t),a||(d=re(e,"click",s[9]),a=!0)},p:Ce,d(n){n&&p(e),a=!1,d()}}}function Ye(s){let e,t,a,d,n,l,i,u,b,v,c,g,k,r,S,V,B,f;function D(h){s[11](h)}let L={options:s[5],fullwidth:!0};s[0].type!==void 0&&(L.value=s[0].type),a=new Ve({props:L}),K.push(()=>P(a,"value",D));const G=[Ke,Je],_=[];function U(h,R){return h[0].type==="seat"?0:1}l=U(s),i=_[l]=G[l](s);function ne(h){s[16](h)}let Y={title:"Select Seat",width:"800px",$$slots:{footer:[Xe],body:[Pe]},$$scope:{ctx:s}};return s[2]!==void 0&&(Y.active=s[2]),r=new We({props:Y}),K.push(()=>P(r,"active",ne)),{c(){e=w("div"),t=w("div"),x(a.$$.fragment),n=O(),i.c(),u=O(),b=w("div"),v=w("div"),c=w("button"),g=j("Delete"),k=O(),x(r.$$.fragment),this.h()},l(h){e=y(h,"DIV",{class:!0});var R=I(e);t=y(R,"DIV",{class:!0});var M=I(t);ee(a.$$.fragment,M),n=C(M),i.l(M),u=C(M),b=y(M,"DIV",{class:!0});var H=I(b);v=y(H,"DIV",{class:!0});var W=I(v);c=y(W,"BUTTON",{class:!0});var oe=I(c);g=Q(oe,"Delete"),oe.forEach(p),W.forEach(p),H.forEach(p),M.forEach(p),R.forEach(p),k=C(h),ee(r.$$.fragment,h),this.h()},h(){E(c,"class","button is-danger"),E(v,"class","control"),E(b,"class","field"),E(t,"class","field-body"),E(e,"class","field is-horizontal")},m(h,R){z(h,e,R),m(e,t),te(a,t,null),m(t,n),_[l].m(t,null),m(t,u),m(t,b),m(b,v),m(v,c),m(c,g),z(h,k,R),te(r,h,R),V=!0,B||(f=re(c,"click",s[14]),B=!0)},p(h,[R]){const M={};!d&&R&1&&(d=!0,M.value=h[0].type,X(()=>d=!1)),a.$set(M);let H=l;l=U(h),l===H?_[l].p(h,R):(Ne(),A(_[H],1,1,()=>{_[H]=null}),Te(),i=_[l],i?i.p(h,R):(i=_[l]=G[l](h),i.c()),q(i,1),i.m(t,u));const W={};R&4194314&&(W.$$scope={dirty:R,ctx:h}),!S&&R&4&&(S=!0,W.active=h[2],X(()=>S=!1)),r.$set(W)},i(h){V||(q(a.$$.fragment,h),q(i),q(r.$$.fragment,h),V=!0)},o(h){A(a.$$.fragment,h),A(i),A(r.$$.fragment,h),V=!1},d(h){h&&p(e),le(a),_[l].d(),h&&p(k),le(r,h),B=!1,f()}}}function $e(s,e,t){let a;const d=Fe();let{value:n={type:"nogroup",criteria:""}}=e,{otherStudents:l=[]}=e,{seats:i=[]}=e,u=!1,b=null;const v=[{value:"nogroup",text:"Can't sit with"},{value:"location",text:"Must sit in area"},{value:"facing",text:"Must sit facing"},{value:"seat",text:"Must sit in seat #"}],c={nogroup:l,location:[{value:"front",text:"Front"},{value:"back",text:"Back"},{value:"left",text:"Left"},{value:"right",text:"Right"}],facing:[{value:"front",text:"Front"},{value:"back",text:"Back"},{value:"left",text:"Left"},{value:"right",text:"Right"}]},g=_=>{d("delete",{id:_})},k=()=>{t(3,b=n.criteria),t(2,u=!0)},r=_=>{t(3,b=_)},S=()=>{t(0,n.criteria=b,n),t(2,u=!1)};function V(_){s.$$.not_equal(n.type,_)&&(n.type=_,t(0,n))}function B(_){s.$$.not_equal(n.criteria,_)&&(n.criteria=_,t(0,n))}function f(_){s.$$.not_equal(n.criteria,_)&&(n.criteria=_,t(0,n))}const D=()=>g(n.id),L=_=>r(_.id);function G(_){u=_,t(2,u)}return s.$$set=_=>{"value"in _&&t(0,n=_.value),"otherStudents"in _&&t(10,l=_.otherStudents),"seats"in _&&t(1,i=_.seats)},s.$$.update=()=>{s.$$.dirty&3&&t(4,a=n.type==="seat"?i.map(_=>({value:_.id,text:_.id})):c[n.type])},[n,i,u,b,a,v,g,k,r,S,l,V,B,f,D,L,G]}class xe extends ye{constructor(e){super(),Ie(this,e,$e,Ye,De,{value:0,otherStudents:10,seats:1})}}se.disable_scroll_handling;const et=se.goto;se.invalidate;se.prefetch;se.prefetch_routes;se.before_navigate;se.after_navigate;function Ee(s,e,t){const a=s.slice();return a[15]=e[t],a[16]=e,a[17]=t,a}function we(s){let e,t,a,d,n,l,i;function u(c){s[13](c,s[15],s[16],s[17])}function b(c){s[14](c)}let v={seats:s[3]};return s[15]!==void 0&&(v.value=s[15]),s[4]!==void 0&&(v.otherStudents=s[4]),a=new xe({props:v}),K.push(()=>P(a,"value",u)),K.push(()=>P(a,"otherStudents",b)),a.$on("delete",s[7]),{c(){e=w("div"),t=w("div"),x(a.$$.fragment),l=O(),this.h()},l(c){e=y(c,"DIV",{class:!0});var g=I(e);t=y(g,"DIV",{class:!0});var k=I(t);ee(a.$$.fragment,k),k.forEach(p),l=C(g),g.forEach(p),this.h()},h(){E(t,"class","field-body"),E(e,"class","field is-horizontal")},m(c,g){z(c,e,g),m(e,t),te(a,t,null),m(e,l),i=!0},p(c,g){s=c;const k={};g&8&&(k.seats=s[3]),!d&&g&4&&(d=!0,k.value=s[15],X(()=>d=!1)),!n&&g&16&&(n=!0,k.otherStudents=s[4],X(()=>n=!1)),a.$set(k)},i(c){i||(q(a.$$.fragment,c),i=!0)},o(c){A(a.$$.fragment,c),i=!1},d(c){c&&p(e),le(a)}}}function tt(s){let e,t,a,d,n,l,i,u,b,v,c,g,k,r,S,V,B,f,D,L,G,_,U,ne,Y,h,R,M,H,W;function oe(o){s[11](o)}let de={label:"First Name"};s[0]!==void 0&&(de.value=s[0]),i=new be({props:de}),K.push(()=>P(i,"value",oe));function Le(o){s[12](o)}let _e={label:"Last Name"};s[1]!==void 0&&(_e.value=s[1]),v=new be({props:_e}),K.push(()=>P(v,"value",Le));let $=s[2],N=[];for(let o=0;o<$.length;o+=1)N[o]=we(Ee(s,$,o));const Re=o=>A(N[o],1,1,()=>{N[o]=null});return{c(){e=w("div"),t=w("div"),a=w("fieldset"),d=w("legend"),n=j("Student Info"),l=O(),x(i.$$.fragment),b=O(),x(v.$$.fragment),g=O(),k=w("div"),r=w("fieldset"),S=w("legend"),V=j("Seating Rules"),B=O(),f=w("div"),D=w("button"),L=j("Add"),G=O();for(let o=0;o<N.length;o+=1)N[o].c();_=O(),U=w("button"),ne=j("Save"),Y=O(),h=w("a"),R=j("Cancel"),this.h()},l(o){e=y(o,"DIV",{class:!0});var T=I(e);t=y(T,"DIV",{class:!0});var Z=I(t);a=y(Z,"FIELDSET",{class:!0});var J=I(a);d=y(J,"LEGEND",{class:!0});var F=I(d);n=Q(F,"Student Info"),F.forEach(p),l=C(J),ee(i.$$.fragment,J),b=C(J),ee(v.$$.fragment,J),J.forEach(p),Z.forEach(p),g=C(T),k=y(T,"DIV",{class:!0});var ie=I(k);r=y(ie,"FIELDSET",{class:!0});var ae=I(r);S=y(ae,"LEGEND",{class:!0});var he=I(S);V=Q(he,"Seating Rules"),he.forEach(p),B=C(ae),f=y(ae,"DIV",{class:!0});var ve=I(f);D=y(ve,"BUTTON",{class:!0});var ge=I(D);L=Q(ge,"Add"),ge.forEach(p),ve.forEach(p),G=C(ae);for(let ce=0;ce<N.length;ce+=1)N[ce].l(ae);ae.forEach(p),ie.forEach(p),T.forEach(p),_=C(o),U=y(o,"BUTTON",{class:!0});var me=I(U);ne=Q(me,"Save"),me.forEach(p),Y=C(o),h=y(o,"A",{class:!0,href:!0});var pe=I(h);R=Q(pe,"Cancel"),pe.forEach(p),this.h()},h(){E(d,"class","subtitle is-4"),E(a,"class","box"),E(t,"class","column"),E(S,"class","subtitle is-4"),E(D,"class","button is-primary"),E(f,"class","field"),E(r,"class","box"),E(k,"class","column"),E(e,"class","columns"),E(U,"class","button is-primary"),E(h,"class","button"),E(h,"href","/roster")},m(o,T){z(o,e,T),m(e,t),m(t,a),m(a,d),m(d,n),m(a,l),te(i,a,null),m(a,b),te(v,a,null),m(e,g),m(e,k),m(k,r),m(r,S),m(S,V),m(r,B),m(r,f),m(f,D),m(D,L),m(r,G);for(let Z=0;Z<N.length;Z+=1)N[Z].m(r,null);z(o,_,T),z(o,U,T),m(U,ne),z(o,Y,T),z(o,h,T),m(h,R),M=!0,H||(W=[re(D,"click",s[6]),re(U,"click",s[5])],H=!0)},p(o,[T]){const Z={};!u&&T&1&&(u=!0,Z.value=o[0],X(()=>u=!1)),i.$set(Z);const J={};if(!c&&T&2&&(c=!0,J.value=o[1],X(()=>c=!1)),v.$set(J),T&156){$=o[2];let F;for(F=0;F<$.length;F+=1){const ie=Ee(o,$,F);N[F]?(N[F].p(ie,T),q(N[F],1)):(N[F]=we(ie),N[F].c(),q(N[F],1),N[F].m(r,null))}for(Ne(),F=$.length;F<N.length;F+=1)Re(F);Te()}},i(o){if(!M){q(i.$$.fragment,o),q(v.$$.fragment,o);for(let T=0;T<$.length;T+=1)q(N[T]);M=!0}},o(o){A(i.$$.fragment,o),A(v.$$.fragment,o),N=N.filter(Boolean);for(let T=0;T<N.length;T+=1)A(N[T]);M=!1},d(o){o&&p(e),le(i),le(v),qe(N,o),o&&p(_),o&&p(U),o&&p(Y),o&&p(h),H=!1,Ue(W)}}}function lt(s,e,t){let a,{firstName:d=""}=e,{lastName:n=""}=e,{id:l=""}=e,{roster:i=1}=e,{rules:u=[]}=e,b=[],v=[];const c=async()=>{!d||!n||(l?await Qe({id:l,firstName:d,lastName:n,rules:u,roster:i}):(t(8,l=await He()),await je({id:l,firstName:d,lastName:n,rules:u,roster:i})),await et(`/roster?rId=${i}`))},g=()=>{const f=u.length>0?Math.max(...u.map(L=>L.id))+1:1,D={type:"nogroup",criteria:"",id:f};t(2,u=[...u,D])},k=f=>{const D=f.detail.id;t(2,u=u.filter(L=>L.id!==D))};ze(async()=>{const f=await Ae();t(10,b=f.map(D=>({value:D.id,text:`${D.firstName} ${D.lastName}`}))),t(3,v=await Ge())});function r(f){d=f,t(0,d)}function S(f){n=f,t(1,n)}function V(f,D,L,G){L[G]=f,t(2,u)}function B(f){a=f,t(4,a),t(10,b),t(8,l)}return s.$$set=f=>{"firstName"in f&&t(0,d=f.firstName),"lastName"in f&&t(1,n=f.lastName),"id"in f&&t(8,l=f.id),"roster"in f&&t(9,i=f.roster),"rules"in f&&t(2,u=f.rules)},s.$$.update=()=>{s.$$.dirty&1280&&t(4,a=b.filter(f=>f.value!=l))},[d,n,u,v,a,c,g,k,l,i,b,r,S,V,B]}class ot extends ye{constructor(e){super(),Ie(this,e,lt,tt,De,{firstName:0,lastName:1,id:8,roster:9,rules:2})}}export{ot as S};
