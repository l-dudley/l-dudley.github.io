import{S as ye,i as Ie,s as De,x as J,M as P,k as w,z as te,a as q,r as j,l as y,m as I,A as le,c as A,u as K,h as p,p as E,b as z,F as m,B as se,G as re,Q as X,w as Ne,d as G,f as Te,g as U,C as ae,Y as Re,R as Be,T as Me,n as Ce,E as ue,q as fe,v as Oe,a1 as qe,K as Ae,o as Ue}from"./index.35c0646e.js";import{g as ze,b as Ge,e as He,i as je,u as Ke}from"./db.181fcdef.js";import{S as Ve}from"./SelectField.cc9fa960.js";import{M as Qe,S as We,T as be}from"./TextField.948649ca.js";import{j as Z}from"./singletons.4ff3743b.js";function Se(s,e,t){const a=s.slice();return a[19]=e[t],a}function Ye(s){let e,t,a;function h(l){s[13](l)}let n={options:s[4],fullwidth:!0};return s[0].criteria!==void 0&&(n.value=s[0].criteria),e=new Ve({props:n}),J.push(()=>P(e,"value",h)),{c(){te(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,i){se(e,l,i),a=!0},p(l,i){const f={};i&16&&(f.options=l[4]),!t&&i&1&&(t=!0,f.value=l[0].criteria,X(()=>t=!1)),e.$set(f)},i(l){a||(U(e.$$.fragment,l),a=!0)},o(l){G(e.$$.fragment,l),a=!1},d(l){ae(e,l)}}}function Je(s){let e,t,a;function h(l){s[12](l)}let n={options:s[4],fullwidth:!0,buttonText:"Select",onButtonClick:s[7]};return s[0].criteria!==void 0&&(n.value=s[0].criteria),e=new We({props:n}),J.push(()=>P(e,"value",h)),{c(){te(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,i){se(e,l,i),a=!0},p(l,i){const f={};i&16&&(f.options=l[4]),!t&&i&1&&(t=!0,f.value=l[0].criteria,X(()=>t=!1)),e.$set(f)},i(l){a||(U(e.$$.fragment,l),a=!0)},o(l){G(e.$$.fragment,l),a=!1},d(l){ae(e,l)}}}function ke(s,e){let t,a=e[19].id+"",h,n,l=`${e[19].left/2}px`,i=`${e[19].top/2}px`,f,b;function d(){return e[15](e[19])}return{key:s,first:null,c(){t=w("div"),h=j(a),n=q(),this.h()},l(c){t=y(c,"DIV",{class:!0});var _=I(t);h=K(_,a),n=A(_),_.forEach(p),this.h()},h(){E(t,"class","seat-box svelte-1255w0a"),ue(t,"has-background-primary",e[19].id===e[3]),ue(t,"has-text-light",e[19].id===e[3]),fe(t,"left",l),fe(t,"top",i),this.first=t},m(c,_){z(c,t,_),m(t,h),m(t,n),f||(b=re(t,"click",d),f=!0)},p(c,_){e=c,_&2&&a!==(a=e[19].id+"")&&Oe(h,a),_&10&&ue(t,"has-background-primary",e[19].id===e[3]),_&10&&ue(t,"has-text-light",e[19].id===e[3]),_&2&&l!==(l=`${e[19].left/2}px`)&&fe(t,"left",l),_&2&&i!==(i=`${e[19].top/2}px`)&&fe(t,"top",i)},d(c){c&&p(t),f=!1,b()}}}function Pe(s){let e,t,a,h,n,l,i,f,b,d=[],c=new Map,_=s[1];const k=o=>o[19].id;for(let o=0;o<_.length;o+=1){let S=Se(s,_,o),T=k(S);c.set(T,d[o]=ke(T,S))}return{c(){e=w("div"),t=w("h4"),a=j("Front"),h=q(),n=w("div"),l=w("h4"),i=j("Left"),f=q(),b=w("div");for(let o=0;o<d.length;o+=1)d[o].c();this.h()},l(o){e=y(o,"DIV",{class:!0});var S=I(e);t=y(S,"H4",{class:!0});var T=I(t);a=K(T,"Front"),T.forEach(p),h=A(S),n=y(S,"DIV",{class:!0});var R=I(n);l=y(R,"H4",{class:!0});var B=I(l);i=K(B,"Left"),B.forEach(p),f=A(R),b=y(R,"DIV",{class:!0});var M=I(b);for(let C=0;C<d.length;C+=1)d[C].l(M);M.forEach(p),R.forEach(p),S.forEach(p),this.h()},h(){E(t,"class","title is-4 has-text-centered mb-0 front-heading svelte-1255w0a"),E(l,"class","title is-4 has-text-centered left-heading svelte-1255w0a"),E(b,"class","room-container svelte-1255w0a"),E(n,"class","is-flex"),E(e,"class","box")},m(o,S){z(o,e,S),m(e,t),m(t,a),m(e,h),m(e,n),m(n,l),m(l,i),m(n,f),m(n,b);for(let T=0;T<d.length;T+=1)d[T].m(b,null)},p(o,S){S&266&&(_=o[1],d=Be(d,S,k,1,o,_,c,b,Me,ke,null,Se))},d(o){o&&p(e);for(let S=0;S<d.length;S+=1)d[S].d()}}}function Xe(s){let e,t,a,h;return{c(){e=w("button"),t=j("Select"),this.h()},l(n){e=y(n,"BUTTON",{class:!0});var l=I(e);t=K(l,"Select"),l.forEach(p),this.h()},h(){E(e,"class","button is-primary")},m(n,l){z(n,e,l),m(e,t),a||(h=re(e,"click",s[9]),a=!0)},p:Ce,d(n){n&&p(e),a=!1,h()}}}function Ze(s){let e,t,a,h,n,l,i,f,b,d,c,_,k,o,S,T,R,B;function M(v){s[11](v)}let C={options:s[5],fullwidth:!0};s[0].type!==void 0&&(C.value=s[0].type),a=new Ve({props:C}),J.push(()=>P(a,"value",M));const g=[Je,Ye],r=[];function V(v,L){return v[0].type==="seat"?0:1}l=V(s),i=r[l]=g[l](s);function x(v){s[16](v)}let $={title:"Select Seat",width:"800px",$$slots:{footer:[Xe],body:[Pe]},$$scope:{ctx:s}};return s[2]!==void 0&&($.active=s[2]),o=new Qe({props:$}),J.push(()=>P(o,"active",x)),{c(){e=w("div"),t=w("div"),te(a.$$.fragment),n=q(),i.c(),f=q(),b=w("div"),d=w("div"),c=w("button"),_=j("Delete"),k=q(),te(o.$$.fragment),this.h()},l(v){e=y(v,"DIV",{class:!0});var L=I(e);t=y(L,"DIV",{class:!0});var O=I(t);le(a.$$.fragment,O),n=A(O),i.l(O),f=A(O),b=y(O,"DIV",{class:!0});var H=I(b);d=y(H,"DIV",{class:!0});var Q=I(d);c=y(Q,"BUTTON",{class:!0});var oe=I(c);_=K(oe,"Delete"),oe.forEach(p),Q.forEach(p),H.forEach(p),O.forEach(p),L.forEach(p),k=A(v),le(o.$$.fragment,v),this.h()},h(){E(c,"class","button is-danger"),E(d,"class","control"),E(b,"class","field"),E(t,"class","field-body"),E(e,"class","field is-horizontal")},m(v,L){z(v,e,L),m(e,t),se(a,t,null),m(t,n),r[l].m(t,null),m(t,f),m(t,b),m(b,d),m(d,c),m(c,_),z(v,k,L),se(o,v,L),T=!0,R||(B=re(c,"click",s[14]),R=!0)},p(v,[L]){const O={};!h&&L&1&&(h=!0,O.value=v[0].type,X(()=>h=!1)),a.$set(O);let H=l;l=V(v),l===H?r[l].p(v,L):(Ne(),G(r[H],1,1,()=>{r[H]=null}),Te(),i=r[l],i?i.p(v,L):(i=r[l]=g[l](v),i.c()),U(i,1),i.m(t,f));const Q={};L&4194314&&(Q.$$scope={dirty:L,ctx:v}),!S&&L&4&&(S=!0,Q.active=v[2],X(()=>S=!1)),o.$set(Q)},i(v){T||(U(a.$$.fragment,v),U(i),U(o.$$.fragment,v),T=!0)},o(v){G(a.$$.fragment,v),G(i),G(o.$$.fragment,v),T=!1},d(v){v&&p(e),ae(a),r[l].d(),v&&p(k),ae(o,v),R=!1,B()}}}function xe(s,e,t){let a;const h=Re();let{value:n={type:"nogroup",criteria:""}}=e,{otherStudents:l=[]}=e,{seats:i=[]}=e,f=!1,b=null;const d=[{value:"nogroup",text:"Can't sit with"},{value:"location",text:"Must sit in area"},{value:"facing",text:"Must sit facing"},{value:"seat",text:"Must sit in seat #"}],c={nogroup:l,location:[{value:"front",text:"Front"},{value:"back",text:"Back"},{value:"left",text:"Left"},{value:"right",text:"Right"}],facing:[{value:"front",text:"Front"},{value:"back",text:"Back"},{value:"left",text:"Left"},{value:"right",text:"Right"}]},_=r=>{h("delete",{id:r})},k=()=>{t(3,b=n.criteria),t(2,f=!0)},o=r=>{t(3,b=r)},S=()=>{t(0,n.criteria=b,n),t(2,f=!1)};function T(r){s.$$.not_equal(n.type,r)&&(n.type=r,t(0,n))}function R(r){s.$$.not_equal(n.criteria,r)&&(n.criteria=r,t(0,n))}function B(r){s.$$.not_equal(n.criteria,r)&&(n.criteria=r,t(0,n))}const M=()=>_(n.id),C=r=>o(r.id);function g(r){f=r,t(2,f)}return s.$$set=r=>{"value"in r&&t(0,n=r.value),"otherStudents"in r&&t(10,l=r.otherStudents),"seats"in r&&t(1,i=r.seats)},s.$$.update=()=>{s.$$.dirty&3&&t(4,a=n.type==="seat"?i.map(r=>({value:r.id,text:r.id})):c[n.type])},[n,i,f,b,a,d,_,k,o,S,l,T,R,B,M,C,g]}class $e extends ye{constructor(e){super(),Ie(this,e,xe,Ze,De,{value:0,otherStudents:10,seats:1})}}Z.disable_scroll_handling;const et=Z.goto;Z.invalidate;Z.invalidateAll;Z.preload_data;Z.preload_code;Z.before_navigate;Z.after_navigate;function Ee(s,e,t){const a=s.slice();return a[18]=e[t],a[19]=e,a[20]=t,a}function we(s){let e,t,a,h,n,l,i;function f(c){s[15](c,s[18],s[19],s[20])}function b(c){s[16](c)}let d={seats:s[3]};return s[18]!==void 0&&(d.value=s[18]),s[4]!==void 0&&(d.otherStudents=s[4]),a=new $e({props:d}),J.push(()=>P(a,"value",f)),J.push(()=>P(a,"otherStudents",b)),a.$on("delete",s[7]),{c(){e=w("div"),t=w("div"),te(a.$$.fragment),l=q(),this.h()},l(c){e=y(c,"DIV",{class:!0});var _=I(e);t=y(_,"DIV",{class:!0});var k=I(t);le(a.$$.fragment,k),k.forEach(p),l=A(_),_.forEach(p),this.h()},h(){E(t,"class","field-body"),E(e,"class","field is-horizontal")},m(c,_){z(c,e,_),m(e,t),se(a,t,null),m(e,l),i=!0},p(c,_){s=c;const k={};_&8&&(k.seats=s[3]),!h&&_&4&&(h=!0,k.value=s[18],X(()=>h=!1)),!n&&_&16&&(n=!0,k.otherStudents=s[4],X(()=>n=!1)),a.$set(k)},i(c){i||(U(a.$$.fragment,c),i=!0)},o(c){G(a.$$.fragment,c),i=!1},d(c){c&&p(e),ae(a)}}}function tt(s){let e,t,a,h,n,l,i,f,b,d,c,_,k,o,S,T,R,B,M,C,g,r,V,x,$,v,L,O,H,Q;function oe(u){s[13](u)}let de={label:"First Name"};s[0]!==void 0&&(de.value=s[0]),i=new be({props:de}),J.push(()=>P(i,"value",oe));function Le(u){s[14](u)}let _e={label:"Last Name"};s[1]!==void 0&&(_e.value=s[1]),d=new be({props:_e}),J.push(()=>P(d,"value",Le));let ee=s[2],D=[];for(let u=0;u<ee.length;u+=1)D[u]=we(Ee(s,ee,u));const Fe=u=>G(D[u],1,1,()=>{D[u]=null});return{c(){e=w("div"),t=w("div"),a=w("fieldset"),h=w("legend"),n=j("Student Info"),l=q(),te(i.$$.fragment),b=q(),te(d.$$.fragment),_=q(),k=w("div"),o=w("fieldset"),S=w("legend"),T=j("Seating Rules"),R=q(),B=w("div"),M=w("button"),C=j("Add"),g=q();for(let u=0;u<D.length;u+=1)D[u].c();r=q(),V=w("button"),x=j("Save"),$=q(),v=w("a"),L=j("Cancel"),this.h()},l(u){e=y(u,"DIV",{class:!0});var N=I(e);t=y(N,"DIV",{class:!0});var W=I(t);a=y(W,"FIELDSET",{class:!0});var Y=I(a);h=y(Y,"LEGEND",{class:!0});var F=I(h);n=K(F,"Student Info"),F.forEach(p),l=A(Y),le(i.$$.fragment,Y),b=A(Y),le(d.$$.fragment,Y),Y.forEach(p),W.forEach(p),_=A(N),k=y(N,"DIV",{class:!0});var ie=I(k);o=y(ie,"FIELDSET",{class:!0});var ne=I(o);S=y(ne,"LEGEND",{class:!0});var he=I(S);T=K(he,"Seating Rules"),he.forEach(p),R=A(ne),B=y(ne,"DIV",{class:!0});var ve=I(B);M=y(ve,"BUTTON",{class:!0});var ge=I(M);C=K(ge,"Add"),ge.forEach(p),ve.forEach(p),g=A(ne);for(let ce=0;ce<D.length;ce+=1)D[ce].l(ne);ne.forEach(p),ie.forEach(p),N.forEach(p),r=A(u),V=y(u,"BUTTON",{class:!0});var me=I(V);x=K(me,"Save"),me.forEach(p),$=A(u),v=y(u,"A",{class:!0,href:!0});var pe=I(v);L=K(pe,"Cancel"),pe.forEach(p),this.h()},h(){E(h,"class","subtitle is-4"),E(a,"class","box"),E(t,"class","column"),E(S,"class","subtitle is-4"),E(M,"class","button is-primary"),E(B,"class","field"),E(o,"class","box"),E(k,"class","column"),E(e,"class","columns"),E(V,"class","button is-primary"),E(v,"class","button"),E(v,"href","/roster")},m(u,N){z(u,e,N),m(e,t),m(t,a),m(a,h),m(h,n),m(a,l),se(i,a,null),m(a,b),se(d,a,null),m(e,_),m(e,k),m(k,o),m(o,S),m(S,T),m(o,R),m(o,B),m(B,M),m(M,C),m(o,g);for(let W=0;W<D.length;W+=1)D[W].m(o,null);z(u,r,N),z(u,V,N),m(V,x),z(u,$,N),z(u,v,N),m(v,L),O=!0,H||(Q=[re(M,"click",s[6]),re(V,"click",s[5])],H=!0)},p(u,[N]){const W={};!f&&N&1&&(f=!0,W.value=u[0],X(()=>f=!1)),i.$set(W);const Y={};if(!c&&N&2&&(c=!0,Y.value=u[1],X(()=>c=!1)),d.$set(Y),N&156){ee=u[2];let F;for(F=0;F<ee.length;F+=1){const ie=Ee(u,ee,F);D[F]?(D[F].p(ie,N),U(D[F],1)):(D[F]=we(ie),D[F].c(),U(D[F],1),D[F].m(o,null))}for(Ne(),F=ee.length;F<D.length;F+=1)Fe(F);Te()}},i(u){if(!O){U(i.$$.fragment,u),U(d.$$.fragment,u);for(let N=0;N<ee.length;N+=1)U(D[N]);O=!0}},o(u){G(i.$$.fragment,u),G(d.$$.fragment,u),D=D.filter(Boolean);for(let N=0;N<D.length;N+=1)G(D[N]);O=!1},d(u){u&&p(e),ae(i),ae(d),qe(D,u),u&&p(r),u&&p(V),u&&p($),u&&p(v),H=!1,Ae(Q)}}}function lt(s,e,t){let a,{firstName:h=""}=e,{lastName:n=""}=e,{id:l=""}=e,{roster:i=1}=e,{rules:f=[]}=e,{uuid:b=""}=e,d=[],c=[],_=!1;const k=async g=>{const r=await Ge(g);t(11,d=r.map(V=>({value:V.id,text:`${V.firstName} ${V.lastName}`})))},o=async()=>{!h||!n||(l?await Ke({id:l,firstName:h,lastName:n,rules:f,roster:i,uuid:b}):(t(8,l=await He()),await je({id:l,firstName:h,lastName:n,rules:f,roster:i,uuid:b})),await et(`/roster?rId=${i}`))},S=()=>{const r={type:"nogroup",criteria:"",id:f.length>0?Math.max(...f.map(V=>V.id))+1:1};t(2,f=[...f,r])},T=g=>{const r=g.detail.id;t(2,f=f.filter(V=>V.id!==r))};Ue(async()=>{t(12,_=!0),await k(i),t(3,c=await ze())});function R(g){h=g,t(0,h)}function B(g){n=g,t(1,n)}function M(g,r,V,x){V[x]=g,t(2,f)}function C(g){a=g,t(4,a),t(11,d),t(8,l)}return s.$$set=g=>{"firstName"in g&&t(0,h=g.firstName),"lastName"in g&&t(1,n=g.lastName),"id"in g&&t(8,l=g.id),"roster"in g&&t(9,i=g.roster),"rules"in g&&t(2,f=g.rules),"uuid"in g&&t(10,b=g.uuid)},s.$$.update=()=>{s.$$.dirty&4608&&i&&_&&k(i),s.$$.dirty&2304&&t(4,a=d.filter(g=>g.value!=l))},[h,n,f,c,a,o,S,T,l,i,b,d,_,R,B,M,C]}class ot extends ye{constructor(e){super(),Ie(this,e,lt,tt,De,{firstName:0,lastName:1,id:8,roster:9,rules:2,uuid:10})}}export{ot as S};
