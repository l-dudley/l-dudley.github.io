import{S as ye,i as De,s as Ie,L as X,M as K,k as w,w as ee,a as O,q as j,l as y,m as D,x as te,c as C,r as J,h as p,n as E,b as U,E as m,y as le,F as re,O as Y,g as Ne,t as z,d as Ve,f as q,z as se,X as Be,P as Re,Q as Me,B as Oe,D as ue,p as fe,u as Ce,a0 as qe,J as Ae,o as Ue}from"./index-8c652ea8.js";import{b as ze,g as Ge,e as He,i as je,u as Je}from"./db-e565effc.js";import{S as Te}from"./SelectField-9f11e83a.js";import{M as Pe,S as Qe,T as be}from"./TextField-9e86c491.js";import{j as Z}from"./singletons-23e59a3d.js";function Se(s,e,t){const a=s.slice();return a[19]=e[t],a}function We(s){let e,t,a;function d(l){s[13](l)}let n={options:s[4],fullwidth:!0};return s[0].criteria!==void 0&&(n.value=s[0].criteria),e=new Te({props:n}),X.push(()=>K(e,"value",d)),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,i){le(e,l,i),a=!0},p(l,i){const u={};i&16&&(u.options=l[4]),!t&&i&1&&(t=!0,u.value=l[0].criteria,Y(()=>t=!1)),e.$set(u)},i(l){a||(q(e.$$.fragment,l),a=!0)},o(l){z(e.$$.fragment,l),a=!1},d(l){se(e,l)}}}function Xe(s){let e,t,a;function d(l){s[12](l)}let n={options:s[4],fullwidth:!0,buttonText:"Select",onButtonClick:s[7]};return s[0].criteria!==void 0&&(n.value=s[0].criteria),e=new Qe({props:n}),X.push(()=>K(e,"value",d)),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,i){le(e,l,i),a=!0},p(l,i){const u={};i&16&&(u.options=l[4]),!t&&i&1&&(t=!0,u.value=l[0].criteria,Y(()=>t=!1)),e.$set(u)},i(l){a||(q(e.$$.fragment,l),a=!0)},o(l){z(e.$$.fragment,l),a=!1},d(l){se(e,l)}}}function ke(s,e){let t,a=e[19].id+"",d,n,l=`${e[19].left/2}px`,i=`${e[19].top/2}px`,u,b;function v(){return e[15](e[19])}return{key:s,first:null,c(){t=w("div"),d=j(a),n=O(),this.h()},l(f){t=y(f,"DIV",{class:!0});var g=D(t);d=J(g,a),n=C(g),g.forEach(p),this.h()},h(){E(t,"class","seat-box svelte-1255w0a"),ue(t,"has-background-primary",e[19].id===e[3]),ue(t,"has-text-light",e[19].id===e[3]),fe(t,"left",l),fe(t,"top",i),this.first=t},m(f,g){U(f,t,g),m(t,d),m(t,n),u||(b=re(t,"click",v),u=!0)},p(f,g){e=f,g&2&&a!==(a=e[19].id+"")&&Ce(d,a),g&10&&ue(t,"has-background-primary",e[19].id===e[3]),g&10&&ue(t,"has-text-light",e[19].id===e[3]),g&2&&l!==(l=`${e[19].left/2}px`)&&fe(t,"left",l),g&2&&i!==(i=`${e[19].top/2}px`)&&fe(t,"top",i)},d(f){f&&p(t),u=!1,b()}}}function Ke(s){let e,t,a,d,n,l,i,u,b,v=[],f=new Map,g=s[1];const k=r=>r[19].id;for(let r=0;r<g.length;r+=1){let S=Se(s,g,r),T=k(S);f.set(T,v[r]=ke(T,S))}return{c(){e=w("div"),t=w("h4"),a=j("Front"),d=O(),n=w("div"),l=w("h4"),i=j("Left"),u=O(),b=w("div");for(let r=0;r<v.length;r+=1)v[r].c();this.h()},l(r){e=y(r,"DIV",{class:!0});var S=D(e);t=y(S,"H4",{class:!0});var T=D(t);a=J(T,"Front"),T.forEach(p),d=C(S),n=y(S,"DIV",{class:!0});var R=D(n);l=y(R,"H4",{class:!0});var c=D(l);i=J(c,"Left"),c.forEach(p),u=C(R),b=y(R,"DIV",{class:!0});var I=D(b);for(let L=0;L<v.length;L+=1)v[L].l(I);I.forEach(p),R.forEach(p),S.forEach(p),this.h()},h(){E(t,"class","title is-4 has-text-centered mb-0 front-heading svelte-1255w0a"),E(l,"class","title is-4 has-text-centered left-heading svelte-1255w0a"),E(b,"class","room-container svelte-1255w0a"),E(n,"class","is-flex"),E(e,"class","box")},m(r,S){U(r,e,S),m(e,t),m(t,a),m(e,d),m(e,n),m(n,l),m(l,i),m(n,u),m(n,b);for(let T=0;T<v.length;T+=1)v[T].m(b,null)},p(r,S){S&266&&(g=r[1],v=Re(v,S,k,1,r,g,f,b,Me,ke,null,Se))},d(r){r&&p(e);for(let S=0;S<v.length;S+=1)v[S].d()}}}function Ye(s){let e,t,a,d;return{c(){e=w("button"),t=j("Select"),this.h()},l(n){e=y(n,"BUTTON",{class:!0});var l=D(e);t=J(l,"Select"),l.forEach(p),this.h()},h(){E(e,"class","button is-primary")},m(n,l){U(n,e,l),m(e,t),a||(d=re(e,"click",s[9]),a=!0)},p:Oe,d(n){n&&p(e),a=!1,d()}}}function Ze(s){let e,t,a,d,n,l,i,u,b,v,f,g,k,r,S,T,R,c;function I(h){s[11](h)}let L={options:s[5],fullwidth:!0};s[0].type!==void 0&&(L.value=s[0].type),a=new Te({props:L}),X.push(()=>K(a,"value",I));const G=[Xe,We],_=[];function A(h,F){return h[0].type==="seat"?0:1}l=A(s),i=_[l]=G[l](s);function ne(h){s[16](h)}let x={title:"Select Seat",width:"800px",$$slots:{footer:[Ye],body:[Ke]},$$scope:{ctx:s}};return s[2]!==void 0&&(x.active=s[2]),r=new Pe({props:x}),X.push(()=>K(r,"active",ne)),{c(){e=w("div"),t=w("div"),ee(a.$$.fragment),n=O(),i.c(),u=O(),b=w("div"),v=w("div"),f=w("button"),g=j("Delete"),k=O(),ee(r.$$.fragment),this.h()},l(h){e=y(h,"DIV",{class:!0});var F=D(e);t=y(F,"DIV",{class:!0});var M=D(t);te(a.$$.fragment,M),n=C(M),i.l(M),u=C(M),b=y(M,"DIV",{class:!0});var H=D(b);v=y(H,"DIV",{class:!0});var P=D(v);f=y(P,"BUTTON",{class:!0});var oe=D(f);g=J(oe,"Delete"),oe.forEach(p),P.forEach(p),H.forEach(p),M.forEach(p),F.forEach(p),k=C(h),te(r.$$.fragment,h),this.h()},h(){E(f,"class","button is-danger"),E(v,"class","control"),E(b,"class","field"),E(t,"class","field-body"),E(e,"class","field is-horizontal")},m(h,F){U(h,e,F),m(e,t),le(a,t,null),m(t,n),_[l].m(t,null),m(t,u),m(t,b),m(b,v),m(v,f),m(f,g),U(h,k,F),le(r,h,F),T=!0,R||(c=re(f,"click",s[14]),R=!0)},p(h,[F]){const M={};!d&&F&1&&(d=!0,M.value=h[0].type,Y(()=>d=!1)),a.$set(M);let H=l;l=A(h),l===H?_[l].p(h,F):(Ne(),z(_[H],1,1,()=>{_[H]=null}),Ve(),i=_[l],i?i.p(h,F):(i=_[l]=G[l](h),i.c()),q(i,1),i.m(t,u));const P={};F&4194314&&(P.$$scope={dirty:F,ctx:h}),!S&&F&4&&(S=!0,P.active=h[2],Y(()=>S=!1)),r.$set(P)},i(h){T||(q(a.$$.fragment,h),q(i),q(r.$$.fragment,h),T=!0)},o(h){z(a.$$.fragment,h),z(i),z(r.$$.fragment,h),T=!1},d(h){h&&p(e),se(a),_[l].d(),h&&p(k),se(r,h),R=!1,c()}}}function xe(s,e,t){let a;const d=Be();let{value:n={type:"nogroup",criteria:""}}=e,{otherStudents:l=[]}=e,{seats:i=[]}=e,u=!1,b=null;const v=[{value:"nogroup",text:"Can't sit with"},{value:"location",text:"Must sit in area"},{value:"facing",text:"Must sit facing"},{value:"seat",text:"Must sit in seat #"}],f={nogroup:l,location:[{value:"front",text:"Front"},{value:"back",text:"Back"},{value:"left",text:"Left"},{value:"right",text:"Right"}],facing:[{value:"front",text:"Front"},{value:"back",text:"Back"},{value:"left",text:"Left"},{value:"right",text:"Right"}]},g=_=>{d("delete",{id:_})},k=()=>{t(3,b=n.criteria),t(2,u=!0)},r=_=>{t(3,b=_)},S=()=>{t(0,n.criteria=b,n),t(2,u=!1)};function T(_){s.$$.not_equal(n.type,_)&&(n.type=_,t(0,n))}function R(_){s.$$.not_equal(n.criteria,_)&&(n.criteria=_,t(0,n))}function c(_){s.$$.not_equal(n.criteria,_)&&(n.criteria=_,t(0,n))}const I=()=>g(n.id),L=_=>r(_.id);function G(_){u=_,t(2,u)}return s.$$set=_=>{"value"in _&&t(0,n=_.value),"otherStudents"in _&&t(10,l=_.otherStudents),"seats"in _&&t(1,i=_.seats)},s.$$.update=()=>{s.$$.dirty&3&&t(4,a=n.type==="seat"?i.map(_=>({value:_.id,text:_.id})):f[n.type])},[n,i,u,b,a,v,g,k,r,S,l,T,R,c,I,L,G]}class $e extends ye{constructor(e){super(),De(this,e,xe,Ze,Ie,{value:0,otherStudents:10,seats:1})}}Z.disable_scroll_handling;const et=Z.goto;Z.invalidate;Z.invalidateAll;Z.preload_data;Z.preload_code;Z.before_navigate;Z.after_navigate;function Ee(s,e,t){const a=s.slice();return a[15]=e[t],a[16]=e,a[17]=t,a}function we(s){let e,t,a,d,n,l,i;function u(f){s[13](f,s[15],s[16],s[17])}function b(f){s[14](f)}let v={seats:s[3]};return s[15]!==void 0&&(v.value=s[15]),s[4]!==void 0&&(v.otherStudents=s[4]),a=new $e({props:v}),X.push(()=>K(a,"value",u)),X.push(()=>K(a,"otherStudents",b)),a.$on("delete",s[7]),{c(){e=w("div"),t=w("div"),ee(a.$$.fragment),l=O(),this.h()},l(f){e=y(f,"DIV",{class:!0});var g=D(e);t=y(g,"DIV",{class:!0});var k=D(t);te(a.$$.fragment,k),k.forEach(p),l=C(g),g.forEach(p),this.h()},h(){E(t,"class","field-body"),E(e,"class","field is-horizontal")},m(f,g){U(f,e,g),m(e,t),le(a,t,null),m(e,l),i=!0},p(f,g){s=f;const k={};g&8&&(k.seats=s[3]),!d&&g&4&&(d=!0,k.value=s[15],Y(()=>d=!1)),!n&&g&16&&(n=!0,k.otherStudents=s[4],Y(()=>n=!1)),a.$set(k)},i(f){i||(q(a.$$.fragment,f),i=!0)},o(f){z(a.$$.fragment,f),i=!1},d(f){f&&p(e),se(a)}}}function tt(s){let e,t,a,d,n,l,i,u,b,v,f,g,k,r,S,T,R,c,I,L,G,_,A,ne,x,h,F,M,H,P;function oe(o){s[11](o)}let de={label:"First Name"};s[0]!==void 0&&(de.value=s[0]),i=new be({props:de}),X.push(()=>K(i,"value",oe));function Le(o){s[12](o)}let _e={label:"Last Name"};s[1]!==void 0&&(_e.value=s[1]),v=new be({props:_e}),X.push(()=>K(v,"value",Le));let $=s[2],N=[];for(let o=0;o<$.length;o+=1)N[o]=we(Ee(s,$,o));const Fe=o=>z(N[o],1,1,()=>{N[o]=null});return{c(){e=w("div"),t=w("div"),a=w("fieldset"),d=w("legend"),n=j("Student Info"),l=O(),ee(i.$$.fragment),b=O(),ee(v.$$.fragment),g=O(),k=w("div"),r=w("fieldset"),S=w("legend"),T=j("Seating Rules"),R=O(),c=w("div"),I=w("button"),L=j("Add"),G=O();for(let o=0;o<N.length;o+=1)N[o].c();_=O(),A=w("button"),ne=j("Save"),x=O(),h=w("a"),F=j("Cancel"),this.h()},l(o){e=y(o,"DIV",{class:!0});var V=D(e);t=y(V,"DIV",{class:!0});var Q=D(t);a=y(Q,"FIELDSET",{class:!0});var W=D(a);d=y(W,"LEGEND",{class:!0});var B=D(d);n=J(B,"Student Info"),B.forEach(p),l=C(W),te(i.$$.fragment,W),b=C(W),te(v.$$.fragment,W),W.forEach(p),Q.forEach(p),g=C(V),k=y(V,"DIV",{class:!0});var ie=D(k);r=y(ie,"FIELDSET",{class:!0});var ae=D(r);S=y(ae,"LEGEND",{class:!0});var he=D(S);T=J(he,"Seating Rules"),he.forEach(p),R=C(ae),c=y(ae,"DIV",{class:!0});var ve=D(c);I=y(ve,"BUTTON",{class:!0});var ge=D(I);L=J(ge,"Add"),ge.forEach(p),ve.forEach(p),G=C(ae);for(let ce=0;ce<N.length;ce+=1)N[ce].l(ae);ae.forEach(p),ie.forEach(p),V.forEach(p),_=C(o),A=y(o,"BUTTON",{class:!0});var me=D(A);ne=J(me,"Save"),me.forEach(p),x=C(o),h=y(o,"A",{class:!0,href:!0});var pe=D(h);F=J(pe,"Cancel"),pe.forEach(p),this.h()},h(){E(d,"class","subtitle is-4"),E(a,"class","box"),E(t,"class","column"),E(S,"class","subtitle is-4"),E(I,"class","button is-primary"),E(c,"class","field"),E(r,"class","box"),E(k,"class","column"),E(e,"class","columns"),E(A,"class","button is-primary"),E(h,"class","button"),E(h,"href","/roster")},m(o,V){U(o,e,V),m(e,t),m(t,a),m(a,d),m(d,n),m(a,l),le(i,a,null),m(a,b),le(v,a,null),m(e,g),m(e,k),m(k,r),m(r,S),m(S,T),m(r,R),m(r,c),m(c,I),m(I,L),m(r,G);for(let Q=0;Q<N.length;Q+=1)N[Q].m(r,null);U(o,_,V),U(o,A,V),m(A,ne),U(o,x,V),U(o,h,V),m(h,F),M=!0,H||(P=[re(I,"click",s[6]),re(A,"click",s[5])],H=!0)},p(o,[V]){const Q={};!u&&V&1&&(u=!0,Q.value=o[0],Y(()=>u=!1)),i.$set(Q);const W={};if(!f&&V&2&&(f=!0,W.value=o[1],Y(()=>f=!1)),v.$set(W),V&156){$=o[2];let B;for(B=0;B<$.length;B+=1){const ie=Ee(o,$,B);N[B]?(N[B].p(ie,V),q(N[B],1)):(N[B]=we(ie),N[B].c(),q(N[B],1),N[B].m(r,null))}for(Ne(),B=$.length;B<N.length;B+=1)Fe(B);Ve()}},i(o){if(!M){q(i.$$.fragment,o),q(v.$$.fragment,o);for(let V=0;V<$.length;V+=1)q(N[V]);M=!0}},o(o){z(i.$$.fragment,o),z(v.$$.fragment,o),N=N.filter(Boolean);for(let V=0;V<N.length;V+=1)z(N[V]);M=!1},d(o){o&&p(e),se(i),se(v),qe(N,o),o&&p(_),o&&p(A),o&&p(x),o&&p(h),H=!1,Ae(P)}}}function lt(s,e,t){let a,{firstName:d=""}=e,{lastName:n=""}=e,{id:l=""}=e,{roster:i=1}=e,{rules:u=[]}=e,b=[],v=[];const f=async()=>{!d||!n||(l?await Je({id:l,firstName:d,lastName:n,rules:u,roster:i}):(t(8,l=await He()),await je({id:l,firstName:d,lastName:n,rules:u,roster:i})),await et(`/roster?rId=${i}`))},g=()=>{const I={type:"nogroup",criteria:"",id:u.length>0?Math.max(...u.map(L=>L.id))+1:1};t(2,u=[...u,I])},k=c=>{const I=c.detail.id;t(2,u=u.filter(L=>L.id!==I))};Ue(async()=>{const c=await ze();t(10,b=c.map(I=>({value:I.id,text:`${I.firstName} ${I.lastName}`}))),t(3,v=await Ge())});function r(c){d=c,t(0,d)}function S(c){n=c,t(1,n)}function T(c,I,L,G){L[G]=c,t(2,u)}function R(c){a=c,t(4,a),t(10,b),t(8,l)}return s.$$set=c=>{"firstName"in c&&t(0,d=c.firstName),"lastName"in c&&t(1,n=c.lastName),"id"in c&&t(8,l=c.id),"roster"in c&&t(9,i=c.roster),"rules"in c&&t(2,u=c.rules)},s.$$.update=()=>{s.$$.dirty&1280&&t(4,a=b.filter(c=>c.value!=l))},[d,n,u,v,a,f,g,k,l,i,b,r,S,T,R]}class ot extends ye{constructor(e){super(),De(this,e,lt,tt,Ie,{firstName:0,lastName:1,id:8,roster:9,rules:2})}}export{ot as S};
