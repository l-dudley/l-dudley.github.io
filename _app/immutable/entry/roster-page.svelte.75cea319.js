import{S as Ze,i as $e,s as xe,x as _e,M as de,z as me,A as he,B as pe,Q as be,g as ve,d as ge,C as Te,k as p,r as y,l as b,m as v,u as C,h as r,p as N,b as E,F as u,v as ie,G as le,V as at,a as A,N as ot,c as S,E as Ae,a1 as et,K as it,L as rt,o as ft,a2 as qe,n as De,e as Se}from"../chunks/index.35c0646e.js";import{a as ct,b as ut,c as _t,e as dt,i as mt,f as ht,h as pt}from"../chunks/db.181fcdef.js";import{M as Be,S as bt,T as vt}from"../chunks/TextField.948649ca.js";import{p as gt}from"../chunks/stores.270600c4.js";const Ge={location:"Must sit in",nogroup:"Can't sit with",facing:"Must sit facing",seat:"Must seat in seat #"};function Tt(s){let e,t;return{c(){e=p("div"),t=y(s[4]),this.h()},l(l){e=b(l,"DIV",{class:!0,slot:!0});var a=v(e);t=C(a,s[4]),a.forEach(r),this.h()},h(){N(e,"class","block"),N(e,"slot","body")},m(l,a){E(l,e,a),u(e,t)},p(l,a){a&16&&ie(t,l[4])},d(l){l&&r(e)}}}function Et(s){let e,t,l,a,i;return{c(){e=p("button"),t=y(s[2]),this.h()},l(n){e=b(n,"BUTTON",{slot:!0,class:!0});var f=v(e);t=C(f,s[2]),f.forEach(r),this.h()},h(){N(e,"slot","footer"),N(e,"class",l="button "+s[7])},m(n,f){E(n,e,f),u(e,t),a||(i=le(e,"click",function(){at(s[5])&&s[5].apply(this,arguments)}),a=!0)},p(n,f){s=n,f&4&&ie(t,s[2]),f&128&&l!==(l="button "+s[7])&&N(e,"class",l)},d(n){n&&r(e),a=!1,i()}}}function Nt(s){let e,t,l;function a(n){s[8](n)}let i={title:s[1],cancelAction:s[6],cancelText:s[3],$$slots:{footer:[Et],body:[Tt]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.active=s[0]),e=new Be({props:i}),_e.push(()=>de(e,"active",a)),{c(){me(e.$$.fragment)},l(n){he(e.$$.fragment,n)},m(n,f){pe(e,n,f),l=!0},p(n,[f]){const _={};f&2&&(_.title=n[1]),f&64&&(_.cancelAction=n[6]),f&8&&(_.cancelText=n[3]),f&692&&(_.$$scope={dirty:f,ctx:n}),!t&&f&1&&(t=!0,_.active=n[0],be(()=>t=!1)),e.$set(_)},i(n){l||(ve(e.$$.fragment,n),l=!0)},o(n){ge(e.$$.fragment,n),l=!1},d(n){Te(e,n)}}}function wt(s,e,t){let{title:l="Confirm"}=e,{confirmText:a="Yes"}=e,{cancelText:i="Cancel"}=e,{bodyText:n="Are you sure?"}=e,{active:f=!1}=e,{confirmAction:_=()=>{}}=e,{cancelAction:T=()=>{t(0,f=!1)}}=e,{confirmButtonClass:h="is-success"}=e;function m(c){f=c,t(0,f)}return s.$$set=c=>{"title"in c&&t(1,l=c.title),"confirmText"in c&&t(2,a=c.confirmText),"cancelText"in c&&t(3,i=c.cancelText),"bodyText"in c&&t(4,n=c.bodyText),"active"in c&&t(0,f=c.active),"confirmAction"in c&&t(5,_=c.confirmAction),"cancelAction"in c&&t(6,T=c.cancelAction),"confirmButtonClass"in c&&t(7,h=c.confirmButtonClass)},[f,l,a,i,n,_,T,h,m]}class kt extends Ze{constructor(e){super(),$e(this,e,wt,Nt,xe,{title:1,confirmText:2,cancelText:3,bodyText:4,active:0,confirmAction:5,cancelAction:6,confirmButtonClass:7})}}function Ke(s,e,t){const l=s.slice();return l[31]=e[t],l}function Qe(s,e,t){const l=s.slice();return l[34]=e[t],l[36]=t,l}function At(s){let e,t;return{c(){e=p("span"),t=y("None")},l(l){e=b(l,"SPAN",{});var a=v(e);t=C(a,"None"),a.forEach(r)},m(l,a){E(l,e,a),u(e,t)},p:De,d(l){l&&r(e)}}}function St(s){let e,t=s[31].rules,l=[];for(let a=0;a<t.length;a+=1)l[a]=Xe(Qe(s,t,a));return{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=Se()},l(a){for(let i=0;i<l.length;i+=1)l[i].l(a);e=Se()},m(a,i){for(let n=0;n<l.length;n+=1)l[n].m(a,i);E(a,e,i)},p(a,i){if(i[0]&1){t=a[31].rules;let n;for(n=0;n<t.length;n+=1){const f=Qe(a,t,n);l[n]?l[n].p(f,i):(l[n]=Xe(f),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=t.length}},d(a){et(l,a),a&&r(e)}}}function yt(s){let e,t=s[34].criteria+"",l;return{c(){e=p("span"),l=y(t)},l(a){e=b(a,"SPAN",{});var i=v(e);l=C(i,t),i.forEach(r)},m(a,i){E(a,e,i),u(e,l)},p(a,i){i[0]&1&&t!==(t=a[34].criteria+"")&&ie(l,t)},d(a){a&&r(e)}}}function Ct(s){let e,t=s[0].filter(a).map(Je)[0]+"",l;function a(...i){return s[20](s[34],...i)}return{c(){e=p("span"),l=y(t)},l(i){e=b(i,"SPAN",{});var n=v(e);l=C(n,t),n.forEach(r)},m(i,n){E(i,e,n),u(e,l)},p(i,n){s=i,n[0]&1&&t!==(t=s[0].filter(a).map(Je)[0]+"")&&ie(l,t)},d(i){i&&r(e)}}}function We(s){let e,t;return{c(){e=p("span"),t=y(", ")},l(l){e=b(l,"SPAN",{});var a=v(e);t=C(a,", "),a.forEach(r)},m(l,a){E(l,e,a),u(e,t)},d(l){l&&r(e)}}}function Xe(s){let e,t=Ge[s[34].type]+"",l,a,i,n;function f(m,c){return m[34].type==="nogroup"?Ct:yt}let _=f(s),T=_(s),h=s[36]!==s[31].rules.length-1&&We();return{c(){e=p("span"),l=y(t),a=A(),T.c(),i=A(),h&&h.c(),n=Se()},l(m){e=b(m,"SPAN",{});var c=v(e);l=C(c,t),a=S(c),T.l(c),c.forEach(r),i=S(m),h&&h.l(m),n=Se()},m(m,c){E(m,e,c),u(e,l),u(e,a),T.m(e,null),E(m,i,c),h&&h.m(m,c),E(m,n,c)},p(m,c){c[0]&1&&t!==(t=Ge[m[34].type]+"")&&ie(l,t),_===(_=f(m))&&T?T.p(m,c):(T.d(1),T=_(m),T&&(T.c(),T.m(e,null))),m[36]!==m[31].rules.length-1?h||(h=We(),h.c(),h.m(n.parentNode,n)):h&&(h.d(1),h=null)},d(m){m&&r(e),T.d(),m&&r(i),h&&h.d(m),m&&r(n)}}}function je(s){let e,t,l=s[31].firstName+"",a,i,n,f=s[31].lastName+"",_,T,h,m,c,R,O,L,Y,G,k,q,I,U,K;function Z(B,w){return B[31].rules&&B[31].rules.length>0?St:At}let V=Z(s),M=V(s);function ne(){return s[21](s[31])}return{c(){e=p("tr"),t=p("td"),a=y(l),i=A(),n=p("td"),_=y(f),T=A(),h=p("td"),M.c(),m=A(),c=p("td"),R=p("a"),O=p("span"),L=y("Edit"),G=A(),k=p("button"),q=y("Delete"),I=A(),this.h()},l(B){e=b(B,"TR",{});var w=v(e);t=b(w,"TD",{});var $=v(t);a=C($,l),$.forEach(r),i=S(w),n=b(w,"TD",{});var X=v(n);_=C(X,f),X.forEach(r),T=S(w),h=b(w,"TD",{});var x=v(h);M.l(x),x.forEach(r),m=S(w),c=b(w,"TD",{});var z=v(c);R=b(z,"A",{class:!0,href:!0});var j=v(R);O=b(j,"SPAN",{});var d=v(O);L=C(d,"Edit"),d.forEach(r),j.forEach(r),G=S(z),k=b(z,"BUTTON",{class:!0});var D=v(k);q=C(D,"Delete"),D.forEach(r),z.forEach(r),I=S(w),w.forEach(r),this.h()},h(){N(R,"class","button is-primary"),N(R,"href",Y="/roster/edit/"+s[31].id+"?roster="+s[6]),N(k,"class","button is-danger")},m(B,w){E(B,e,w),u(e,t),u(t,a),u(e,i),u(e,n),u(n,_),u(e,T),u(e,h),M.m(h,null),u(e,m),u(e,c),u(c,R),u(R,O),u(O,L),u(c,G),u(c,k),u(k,q),u(e,I),U||(K=le(k,"click",ne),U=!0)},p(B,w){s=B,w[0]&1&&l!==(l=s[31].firstName+"")&&ie(a,l),w[0]&1&&f!==(f=s[31].lastName+"")&&ie(_,f),V===(V=Z(s))&&M?M.p(s,w):(M.d(1),M=V(s),M&&(M.c(),M.m(h,null))),w[0]&65&&Y!==(Y="/roster/edit/"+s[31].id+"?roster="+s[6])&&N(R,"href",Y)},d(B){B&&r(e),M.d(),U=!1,K()}}}function Rt(s){let e,t,l,a,i,n;return{c(){e=p("p"),t=y("Enter each students first and last name, one student per line"),l=A(),a=p("textarea"),this.h()},l(f){e=b(f,"P",{class:!0});var _=v(e);t=C(_,"Enter each students first and last name, one student per line"),_.forEach(r),l=S(f),a=b(f,"TEXTAREA",{class:!0,rows:!0}),v(a).forEach(r),this.h()},h(){N(e,"class","is-size-7"),N(a,"class","textarea"),N(a,"rows","10")},m(f,_){E(f,e,_),u(e,t),E(f,l,_),E(f,a,_),qe(a,s[3]),i||(n=le(a,"input",s[23]),i=!0)},p(f,_){_[0]&8&&qe(a,f[3])},d(f){f&&r(e),f&&r(l),f&&r(a),i=!1,n()}}}function Bt(s){let e,t,l,a;return{c(){e=p("button"),t=y("Save"),this.h()},l(i){e=b(i,"BUTTON",{class:!0});var n=v(e);t=C(n,"Save"),n.forEach(r),this.h()},h(){N(e,"class","button is-primary")},m(i,n){E(i,e,n),u(e,t),l||(a=le(e,"click",s[11]),l=!0)},p:De,d(i){i&&r(e),l=!1,a()}}}function Dt(s){let e,t,l;function a(n){s[25](n)}let i={label:"Roster Name"};return s[8]!==void 0&&(i.value=s[8]),e=new vt({props:i}),_e.push(()=>de(e,"value",a)),{c(){me(e.$$.fragment)},l(n){he(e.$$.fragment,n)},m(n,f){pe(e,n,f),l=!0},p(n,f){const _={};!t&&f[0]&256&&(t=!0,_.value=n[8],be(()=>t=!1)),e.$set(_)},i(n){l||(ve(e.$$.fragment,n),l=!0)},o(n){ge(e.$$.fragment,n),l=!1},d(n){Te(e,n)}}}function It(s){let e,t,l,a;return{c(){e=p("button"),t=y("Save"),this.h()},l(i){e=b(i,"BUTTON",{class:!0});var n=v(e);t=C(n,"Save"),n.forEach(r),this.h()},h(){N(e,"class","button is-primary")},m(i,n){E(i,e,n),u(e,t),l||(a=le(e,"click",s[14]),l=!0)},p:De,d(i){i&&r(e),l=!1,a()}}}function Mt(s){let e,t,l,a,i,n,f,_,T,h,m,c,R,O,L,Y,G,k,q,I,U,K,Z,V,M,ne,B,w,$,X,x,z,j,d,D,ee,F,te,re,Q,Ee,we,J,ye,ae,Ce,Ie;function tt(o){s[16](o)}let Me={fullwidth:"true",options:s[5],buttonText:"Add Roster",onButtonClick:s[13],onChange:s[15]};s[6]!==void 0&&(Me.value=s[6]),i=new bt({props:Me}),_e.push(()=>de(i,"value",tt));let fe=s[0],P=[];for(let o=0;o<fe.length;o+=1)P[o]=je(Ke(s,fe,o));function st(o){s[22](o)}let Pe={title:"Are you sure?",bodyText:"Are you sure you want to delete this student? This action cannot be undone.",confirmText:"Delete",confirmButtonClass:"is-danger",cancelText:"Cancel",confirmAction:s[10]};s[1]!==void 0&&(Pe.active=s[1]),F=new kt({props:Pe}),_e.push(()=>de(F,"active",st));function lt(o){s[24](o)}let Oe={title:"Create Students",$$slots:{footer:[Bt],body:[Rt]},$$scope:{ctx:s}};s[2]!==void 0&&(Oe.active=s[2]),Q=new Be({props:Oe}),_e.push(()=>de(Q,"active",lt));function nt(o){s[26](o)}let Ue={title:"Create Roster",$$slots:{footer:[It],body:[Dt]},$$scope:{ctx:s}};return s[7]!==void 0&&(Ue.active=s[7]),J=new Be({props:Ue}),_e.push(()=>de(J,"active",nt)),{c(){e=A(),t=p("h2"),l=y("Class Roster"),a=A(),me(i.$$.fragment),f=A(),_=p("div"),T=p("div"),h=p("a"),m=y("Add One"),R=A(),O=p("div"),L=p("button"),Y=y("Add Multiple"),G=A(),k=p("table"),q=p("thead"),I=p("tr"),U=p("th"),K=y("First Name"),Z=A(),V=p("th"),M=y("Last Name"),ne=A(),B=p("th"),w=y("Rules"),$=A(),X=p("th"),x=A(),z=p("tbody");for(let o=0;o<P.length;o+=1)P[o].c();j=A(),d=p("div"),D=p("div"),ee=A(),me(F.$$.fragment),re=A(),me(Q.$$.fragment),we=A(),me(J.$$.fragment),this.h()},l(o){ot("svelte-1ue2fn",document.head).forEach(r),e=S(o),t=b(o,"H2",{class:!0});var W=v(t);l=C(W,"Class Roster"),W.forEach(r),a=S(o),he(i.$$.fragment,o),f=S(o),_=b(o,"DIV",{class:!0});var oe=v(_);T=b(oe,"DIV",{class:!0});var ce=v(T);h=b(ce,"A",{class:!0,href:!0});var ue=v(h);m=C(ue,"Add One"),ue.forEach(r),ce.forEach(r),R=S(oe),O=b(oe,"DIV",{class:!0});var H=v(O);L=b(H,"BUTTON",{class:!0});var Ne=v(L);Y=C(Ne,"Add Multiple"),Ne.forEach(r),H.forEach(r),oe.forEach(r),G=S(o),k=b(o,"TABLE",{class:!0});var ke=v(k);q=b(ke,"THEAD",{});var Ve=v(q);I=b(Ve,"TR",{});var se=v(I);U=b(se,"TH",{});var He=v(U);K=C(He,"First Name"),He.forEach(r),Z=S(se),V=b(se,"TH",{});var Fe=v(V);M=C(Fe,"Last Name"),Fe.forEach(r),ne=S(se),B=b(se,"TH",{});var Le=v(B);w=C(Le,"Rules"),Le.forEach(r),$=S(se),X=b(se,"TH",{}),v(X).forEach(r),se.forEach(r),Ve.forEach(r),x=S(ke),z=b(ke,"TBODY",{});var ze=v(z);for(let Re=0;Re<P.length;Re+=1)P[Re].l(ze);ze.forEach(r),ke.forEach(r),j=S(o),d=b(o,"DIV",{class:!0});var Ye=v(d);D=b(Ye,"DIV",{class:!0}),v(D).forEach(r),Ye.forEach(r),ee=S(o),he(F.$$.fragment,o),re=S(o),he(Q.$$.fragment,o),we=S(o),he(J.$$.fragment,o),this.h()},h(){document.title="Class Roster",N(t,"class","title is-2"),N(h,"class","button is-primary"),N(h,"href",c="/roster/edit?roster="+s[6]),N(T,"class","control"),N(L,"class","button is-primary"),N(O,"class","control"),N(_,"class","field is-grouped"),Ae(U,"is-selected",s[4]==="firstName"),Ae(V,"is-selected",s[4]==="lastName"),N(k,"class","table is-fullwidth"),N(D,"class","modal-background"),N(d,"class","modal")},m(o,g){E(o,e,g),E(o,t,g),u(t,l),E(o,a,g),pe(i,o,g),E(o,f,g),E(o,_,g),u(_,T),u(T,h),u(h,m),u(_,R),u(_,O),u(O,L),u(L,Y),E(o,G,g),E(o,k,g),u(k,q),u(q,I),u(I,U),u(U,K),u(I,Z),u(I,V),u(V,M),u(I,ne),u(I,B),u(B,w),u(I,$),u(I,X),u(k,x),u(k,z);for(let W=0;W<P.length;W+=1)P[W].m(z,null);E(o,j,g),E(o,d,g),u(d,D),E(o,ee,g),pe(F,o,g),E(o,re,g),pe(Q,o,g),E(o,we,g),pe(J,o,g),ae=!0,Ce||(Ie=[le(L,"click",s[17]),le(U,"click",s[18]),le(V,"click",s[19])],Ce=!0)},p(o,g){const W={};if(g[0]&32&&(W.options=o[5]),!n&&g[0]&64&&(n=!0,W.value=o[6],be(()=>n=!1)),i.$set(W),(!ae||g[0]&64&&c!==(c="/roster/edit?roster="+o[6]))&&N(h,"href",c),(!ae||g[0]&16)&&Ae(U,"is-selected",o[4]==="firstName"),(!ae||g[0]&16)&&Ae(V,"is-selected",o[4]==="lastName"),g[0]&577){fe=o[0];let H;for(H=0;H<fe.length;H+=1){const Ne=Ke(o,fe,H);P[H]?P[H].p(Ne,g):(P[H]=je(Ne),P[H].c(),P[H].m(z,null))}for(;H<P.length;H+=1)P[H].d(1);P.length=fe.length}const oe={};!te&&g[0]&2&&(te=!0,oe.active=o[1],be(()=>te=!1)),F.$set(oe);const ce={};g[0]&8|g[1]&64&&(ce.$$scope={dirty:g,ctx:o}),!Ee&&g[0]&4&&(Ee=!0,ce.active=o[2],be(()=>Ee=!1)),Q.$set(ce);const ue={};g[0]&256|g[1]&64&&(ue.$$scope={dirty:g,ctx:o}),!ye&&g[0]&128&&(ye=!0,ue.active=o[7],be(()=>ye=!1)),J.$set(ue)},i(o){ae||(ve(i.$$.fragment,o),ve(F.$$.fragment,o),ve(Q.$$.fragment,o),ve(J.$$.fragment,o),ae=!0)},o(o){ge(i.$$.fragment,o),ge(F.$$.fragment,o),ge(Q.$$.fragment,o),ge(J.$$.fragment,o),ae=!1},d(o){o&&r(e),o&&r(t),o&&r(a),Te(i,o),o&&r(f),o&&r(_),o&&r(G),o&&r(k),et(P,o),o&&r(j),o&&r(d),o&&r(ee),Te(F,o),o&&r(re),Te(Q,o),o&&r(we),Te(J,o),Ce=!1,it(Ie)}}}const Je=s=>`${s.firstName} ${s.lastName}`;function Pt(s,e,t){let l;rt(s,gt,d=>t(28,l=d));let a=[],i=!1,n="",f=!1,_="",T="lastName",h=[],m=1,c=!1,R="";ft(async()=>{await U();const d=l.url.searchParams.get("rId");t(6,m=d?Number.parseInt(d):1),await K(),Y()});const O=d=>{n=d,t(1,i=!0)},L=async()=>{await _t(n),t(0,a=a.filter(d=>d.id!==n)),n="",t(1,i=!1)};function Y(){const d=a.sort((D,ee)=>{const F=D[T].toUpperCase(),te=ee[T].toUpperCase();return F<te?-1:F>te?1:0});t(0,a=d)}async function G(){if(_.length===0)return;const d=await dt();_.split(`
`).forEach(async(ee,F)=>{const[te,re]=ee.split(" "),Ee={id:d+F,firstName:te,lastName:re,rules:[],roster:m};await mt(Ee)}),await K(),t(3,_=""),t(2,f=!1)}function k(d){t(4,T=d),Y()}function q(){t(8,R=""),t(7,c=!0)}async function I(){if(R.length===0)return;const D={id:await ht(),name:R};await pt(D),await U(),t(7,c=!1)}async function U(){const d=await ct();t(5,h=d.map(D=>({value:D.id,text:D.name})))}async function K(){t(0,a=await ut(m))}function Z(d){m=d,t(6,m)}const V=()=>t(2,f=!0),M=()=>k("firstName"),ne=()=>k("lastName"),B=(d,D)=>D.id==d.criteria,w=d=>O(d.id);function $(d){i=d,t(1,i)}function X(){_=this.value,t(3,_)}function x(d){f=d,t(2,f)}function z(d){R=d,t(8,R)}function j(d){c=d,t(7,c)}return[a,i,f,_,T,h,m,c,R,O,L,G,k,q,I,K,Z,V,M,ne,B,w,$,X,x,z,j]}class Ft extends Ze{constructor(e){super(),$e(this,e,Pt,Mt,xe,{},null,[-1,-1])}}export{Ft as default};
