import{S as K,i as Q,s as R,e as b,t as q,c as I,a as N,h as x,d as f,b as S,f as w,g as C,H as m,j as X,k as V,N as Y,m as $,I as Z,O as ee,n as B,w as te,P as le}from"../chunks/index-b1f754cc.js";import{g as se,a as ae}from"../chunks/db-c0070083.js";function U(g,s,l){const i=g.slice();return i[5]=s[l],i}function J(g,s){var _,d;let l,i=((_=s[1][s[5].id])==null?void 0:_.firstName)+" "+((d=s[1][s[5].id])==null?void 0:d.lastName),p,n=`${s[5].left}px`,c=`${s[5].top}px`;return{key:g,first:null,c(){l=b("div"),p=q(i),this.h()},l(a){l=I(a,"DIV",{class:!0});var t=N(l);p=x(t,i),t.forEach(f),this.h()},h(){var a;S(l,"class","seat-box svelte-r9xfjg"),w(l,"left",n,!1),w(l,"top",c,!1),w(l,"background-color",(a=s[1][s[5].id])!=null&&a.valid?"white":"red",!1),this.first=l},m(a,t){C(a,l,t),m(l,p)},p(a,t){var o,u,v;s=a,t&3&&i!==(i=((o=s[1][s[5].id])==null?void 0:o.firstName)+" "+((u=s[1][s[5].id])==null?void 0:u.lastName))&&X(p,i),t&1&&n!==(n=`${s[5].left}px`)&&w(l,"left",n,!1),t&1&&c!==(c=`${s[5].top}px`)&&w(l,"top",c,!1),t&3&&w(l,"background-color",(v=s[1][s[5].id])!=null&&v.valid?"white":"red",!1)},d(a){a&&f(l)}}}function re(g){let s,l,i,p,n,c,_,d,a,t,o,u,v,k,G,H,h=[],M=new Map,L,F,E=g[0];const j=e=>e[5].id;for(let e=0;e<E.length;e+=1){let r=U(g,E,e),y=j(r);M.set(y,h[e]=J(y,r))}return{c(){s=V(),l=b("h2"),i=q("Generate Seating Chart"),p=V(),n=b("div"),c=b("div"),_=b("button"),d=q("Generate Chart"),a=V(),t=b("div"),o=b("h4"),u=q("Front"),v=V(),k=b("h4"),G=q("Left"),H=V();for(let e=0;e<h.length;e+=1)h[e].c();this.h()},l(e){Y('[data-svelte="svelte-13jkzv9"]',document.head).forEach(f),s=$(e),l=I(e,"H2",{class:!0});var y=N(l);i=x(y,"Generate Seating Chart"),y.forEach(f),p=$(e),n=I(e,"DIV",{class:!0});var P=N(n);c=I(P,"DIV",{class:!0});var T=N(c);_=I(T,"BUTTON",{class:!0});var W=N(_);d=x(W,"Generate Chart"),W.forEach(f),T.forEach(f),P.forEach(f),a=$(e),t=I(e,"DIV",{class:!0,style:!0});var D=N(t);o=I(D,"H4",{class:!0});var z=N(o);u=x(z,"Front"),z.forEach(f),v=$(D),k=I(D,"H4",{class:!0});var A=N(k);G=x(A,"Left"),A.forEach(f),H=$(D);for(let O=0;O<h.length;O+=1)h[O].l(D);D.forEach(f),this.h()},h(){document.title="Generate Seating Chart",S(l,"class","title is-2"),S(_,"class","button is-primary"),S(c,"class","control"),S(n,"class","field is-grouped"),S(o,"class","title is-4 has-text-centered front-heading svelte-r9xfjg"),S(k,"class","title is-4 has-text-centered left-heading svelte-r9xfjg"),S(t,"class","box"),w(t,"height","800px")},m(e,r){C(e,s,r),C(e,l,r),m(l,i),C(e,p,r),C(e,n,r),m(n,c),m(c,_),m(_,d),C(e,a,r),C(e,t,r),m(t,o),m(o,u),m(t,v),m(t,k),m(k,G),m(t,H);for(let y=0;y<h.length;y+=1)h[y].m(t,null);L||(F=Z(_,"click",g[2]),L=!0)},p(e,[r]){r&3&&(E=e[0],h=ee(h,r,j,1,e,E,M,t,le,J,null,U))},i:B,o:B,d(e){e&&f(s),e&&f(l),e&&f(p),e&&f(n),e&&f(a),e&&f(t);for(let r=0;r<h.length;r+=1)h[r].d();L=!1,F()}}}function oe(g,s,l){let i=[],p=[],n={};const c=(d,a,t)=>{let o=Math.floor(Math.random()*t.length);var u=!0;let v=null;const k=3;let G=1;for(;u&&G<k;){const H=t[o];let h=[];H.group.forEach(E=>{const j=a[E],e=(j==null?void 0:j.rules.filter(r=>r.type==="nogroup"))||[];h.push(e.map(r=>r.criteria))}),v=t[o].id;const M=a[v],L=typeof M!="undefined"&&M!==null&&M!=="",F=h.flat().filter(E=>d.id===E).length>0;u=L||F,G+=1,console.log(u)}return{seatId:v,valid:!u}},_=()=>{let d={},a=[...i];p.sort((t,o)=>o.rules.length-t.rules.length).forEach(t=>{const{seatId:o,valid:u}=c(t,d,a);o!==null&&(t.valid=u,d[o]=t,a=a.filter(v=>v.id!==o))}),l(1,n=d)};return te(async()=>{l(0,i=await se()),p=await ae();let d={};i.forEach(a=>{d[a.id]={firstName:"Empty",lastName:"Seat",valid:!0}}),l(1,n=d)}),[i,n,_]}class fe extends K{constructor(s){super(),Q(this,s,oe,re,R,{})}}export{fe as default};
